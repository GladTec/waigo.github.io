<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/><link rel="shortcut icon" href="/img/logo.ico"/><link rel="shortcut icon" href="/img/logo.png"/><meta name="msapplication-TileColor" content="#fff"/><meta name="msapplication-TileImage" content="/img/logo.png"/><title>Defining and using models | Waigo.js</title><style>@import url('https://fonts.googleapis.com/css?family=Roboto Mono:300|Open Sans:300,400|Raleway:100,300,500');a,abbr,acronym,address,applet,big,blockquote,body,caption,cite,code,dd,del,dfn,div,dl,dt,em,fieldset,form,h1,h2,h3,h4,h5,h6,html,iframe,img,ins,kbd,label,legend,li,object,ol,p,pre,q,s,samp,small,span,strike,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,tt,ul,var{margin:0;padding:0;border:0;outline:0;font-weight:inherit;font-style:inherit;font-family:inherit;font-size:100%;vertical-align:baseline}body{line-height:1;color:#000;background:#fff}ol,ul{list-style:none}table{border-collapse:separate;border-spacing:0}caption,table,td,th{vertical-align:middle}caption,td,th{text-align:left;font-weight:400}a img{border:none}*{box-sizing:border-box}@font-face{font-family:FontAwesome;src:url("/fonts/fontawesome-webfont.eot?v=4.6.1");src:url("/fonts/fontawesome-webfont.eot?#iefix&v=4.6.1") format('embedded-opentype'),url("/fonts/fontawesome-webfont.woff?v=4.6.1") format('woff'),url("/fonts/fontawesome-webfont.woff2?v=4.6.1") format('woff2'),url("/fonts/fontawesome-webfont.ttf?v=4.6.1") format('truetype'),url("/fonts/fontawesome-webfont.svg?v=4.6.1#fontawesomeregular") format('svg');font-weight:400;font-style:normal}.fa,.page.guide section.content a.github-edit-link:before,i.arrow.left:before,i.arrow.right:before,i.changelog:before,i.discuss:before,i.github:before,i.menu.open:before,i.menu:before,i.twitter:before{display:inline-block;font-family:FontAwesome;font-style:normal;font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.333333333333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.285714285714286em;text-align:center}.fa-ul{padding-left:0;margin-left:2.142857142857143em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.142857142857143em;width:2.142857142857143em;top:.142857142857143em;text-align:center}.fa-li.fa-lg{left:-1.857142857142857em}.fa-border{padding:.2em .25em .15em;border:.08em solid #eee;border-radius:.1em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left,.page.guide section.content a.github-edit-link:before.pull-left,i.arrow.left:before.pull-left,i.arrow.right:before.pull-left,i.changelog:before.pull-left,i.discuss:before.pull-left,i.github:before.pull-left,i.menu.open:before.pull-left,i.menu:before.pull-left,i.twitter:before.pull-left{margin-right:.3em}.fa.pull-right,.page.guide section.content a.github-edit-link:before.pull-right,i.arrow.left:before.pull-right,i.arrow.right:before.pull-right,i.changelog:before.pull-right,i.discuss:before.pull-right,i.github:before.pull-right,i.menu.open:before.pull-right,i.menu:before.pull-right,i.twitter:before.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:spin 2s infinite linear;animation:spin 2s infinite linear}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0,mirror=1);-webkit-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2,mirror=1);-webkit-transform:scaleY(-1);transform:scaleY(-1)}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.page.home section.features-1 ul li .title,.page.home section.next-links>div a,.page.home section.quick-start h2,.page.home section.splash .actions a,.page.home section.splash p.tagline,footer .social a,footer .tagline,h1,h2,h3,header,header button.mobile-toggle,main.side-nav-layout button.nav.mobile{font-family:Raleway,Arial,sans-serif;font-weight:100;letter-spacing:1px}.page.home section.features-1 ul li .title,.page.home section.next-links>div a,.page.home section.splash .actions a,header button.mobile-toggle,main.side-nav-layout button.nav.mobile{font-weight:300}.page.home section.features-1 .intro,body,main.side-nav-layout aside,main.side-nav-layout aside li.active>a{font-family:Open Sans,Arial,sans-serif;font-weight:300}main.side-nav-layout aside li.active>a{font-weight:400}.page.guide section.content code,.page.home section.quick-start pre,.page.home section.splash .install{font-family:Roboto Mono,monospace;font-weight:300}mixin standard-box-shadow(){box-shadow:0 7px 26px -1px rgba(0,0,0,.53)}.page.guide section.content code[class*=hljs],.page.guide section.content img{max-width:100%;box-shadow:0 0 11px 0 rgba(0,0,0,.5)}html{font-size:16px}body{background-color:#fff;margin:0;padding:0}a{color:#3498db;text-decoration:none;border-bottom:1px solid #3498db;-webkit-transition:all .2s linear;transition:all .2s linear}a:hover{color:#fff;background-color:#3498db}.page{position:relative;min-height:100vh;width:100%}.page main{background-color:#fff;min-height:calc(100vh - 64px);padding:1em 1.5em 0}@media only screen and (max-width:500px){.page main{padding:1em}}strong{font-weight:bolder}i{display:inline-block;-webkit-transition:all .2s linear;transition:all .2s linear}i.twitter{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(0deg);transform:rotate(0deg)}i.twitter:before{content:"\F099"}i.github{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(0deg);transform:rotate(0deg)}i.github:before{content:"\F09B"}i.discuss{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(0deg);transform:rotate(0deg)}i.discuss:before{content:"\F086"}i.menu{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(0deg);transform:rotate(0deg)}i.menu:before{content:"\F0C9"}i.menu.open{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(0deg);transform:rotate(0deg)}i.menu.open:before{content:"\F0C9"}i.changelog{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(0deg);transform:rotate(0deg)}i.changelog:before{content:"\F126"}i.arrow.right{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(0deg);transform:rotate(0deg)}i.arrow.right:before{content:"\F101"}i.arrow.left{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(180deg);transform:rotate(180deg)}i.arrow.left:before{content:"\F101"}.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}header{position:relative;width:100%;height:64px;margin-bottom:1.5em;-webkit-transition:all .3s linear;transition:all .3s linear;background-color:#2c3e50;color:#fff}.page.home .headroom--unfixed header{background-color:#3498db;color:#fff;box-shadow:none}.page.home .headroom--pinned header{background-color:#2c3e50;color:#fff}header .brand{position:absolute;height:64px}header .brand a{text-decoration:none;padding:0 .5em;line-height:64px;font-size:1.5rem}header .brand a,header .brand a:hover{color:inherit;background-color:inherit;border-bottom:none}header .brand a:hover{border-radius:0}header ul.nav{position:absolute;height:64px;right:15px;list-style:none;display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-o-box-orient:horizontal;-webkit-box-lines:single;-moz-box-lines:single;-o-box-lines:single;-ms-flex-flow:row nowrap;flex-flow:row;-webkit-box-pack:center;-o-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-o-box-align:center;-ms-flex-align:center;align-items:center}header ul.nav li{display:inline-block;margin-right:1.3em}@media only screen and (max-width:800px){header ul.nav li{margin-right:1em}}header ul.nav li:last-child{margin-right:0}header ul.nav li a{color:#fff;text-decoration:none;border:1px solid transparent;-webkit-transition:all .2s linear;transition:all .2s linear;padding:0 .5em;border-radius:5px;font-size:1.2em;display:inline-block;height:100%;line-height:48px}header ul.nav li a.active,header ul.nav li a:hover{color:#fff;background-color:transparent;border:1px solid #fff}header ul.nav li.social{margin-right:.3em}header ul.nav li.social a{font-size:1em}@media only screen and (max-width:500px){header ul.nav{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);z-index:10;pointer-events:none;-webkit-transition:opacity .3s linear;transition:opacity .3s linear;display:block;top:48px;height:auto;border-radius:10px;border:1px solid #2980b9;background-color:#2980b9}header ul.nav li{display:block;background-color:transparent;margin:0;border-bottom:1px solid #3498db}header ul.nav li.social{margin:0}header ul.nav li:last-child{border-bottom:none}header ul.nav li a{color:#fff;text-decoration:none;border:1px solid transparent;-webkit-transition:all .2s linear;transition:all .2s linear;padding:0 .5em;border-radius:5px;font-size:1em;display:block;border-radius:0;text-align:center;font-weight:bolder}header ul.nav li a.active,header ul.nav li a:hover{color:#2980b9;background-color:#fff;border:1px solid transparent}header ul.nav.active{opacity:1;-ms-filter:none;filter:none;pointer-events:auto}}header button.mobile-toggle{border-radius:10px;border:1px solid #fff;padding:.7em 1em;-webkit-transition:all .2s linear;transition:all .2s linear;color:#fff;background-color:transparent;display:none;position:absolute;right:15px;top:16px;width:32px;height:32px;padding:0;cursor:pointer}header button.mobile-toggle:hover{border-radius:10px;border:1px solid #fff;color:#3498db;background-color:#fff}header button.mobile-toggle i{display:block}@media only screen and (max-width:500px){header button.mobile-toggle{display:block}}footer{width:100%;height:50px;border-top:1px solid #ccc;padding:1em;margin-top:60px;color:#666;text-align:center}footer .tagline{margin:0 0 1em}footer .credits{font-size:50%}footer .social{margin-top:1em}footer .social a{text-decoration:none;display:inline-block;margin:0 .2em;width:24px;height:24px;opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);-webkit-transition:all .3s linear;transition:all .3s linear}footer .social a,footer .social a:hover{color:inherit;background-color:inherit;border-bottom:none}footer .social a:hover{border-radius:0;opacity:1;-ms-filter:none;filter:none}main.side-nav-layout{padding-top:2em}main.side-nav-layout section.content{position:relative;display:inline-block;vertical-align:top;width:79%;padding-left:20px;font-size:1rem;line-height:1.5em;word-wrap:break-word}@media only screen and (max-width:500px){main.side-nav-layout section.content{width:100%;padding:0 1em}}main.side-nav-layout section.content .prev-next{display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-o-box-orient:horizontal;-webkit-box-lines:multiple;-moz-box-lines:multiple;-o-box-lines:multiple;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:justify;-o-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-o-box-align:center;-ms-flex-align:center;align-items:center;margin-top:4em;font-size:75%;width:100%}main.side-nav-layout aside{display:inline-block;vertical-align:top;padding:0 20px 0 0;border-right:1px solid #ecf0f1;font-size:1rem;width:20%;overflow:hidden}main.side-nav-layout aside a{border-bottom:none}main.side-nav-layout aside a:hover{border-bottom:1px dashed #000}main.side-nav-layout aside li.active>a{font-size:140%;color:#000;border-bottom:1px dashed #000}main.side-nav-layout aside li.active>a:hover{color:#fff}main.side-nav-layout aside>ul>li{line-height:2em}main.side-nav-layout aside>ul>li>ul{display:none}main.side-nav-layout aside>ul>li.active>ul{color:#000;display:block;font-size:80%;margin:.7em 0 0 2em}main.side-nav-layout aside>ul>li.active>ul>li{line-height:1.8em}@media only screen and (max-width:500px){main.side-nav-layout aside{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:2;left:-100vw;-webkit-transition:all .2s linear;transition:all .2s linear;overflow-y:scroll;background-color:#fff}main.side-nav-layout aside ul{margin:1em 0 0 4em}main.side-nav-layout aside.mobile.visible{left:0}}main.side-nav-layout button.nav.mobile{border-radius:10px;border:1px solid #2980b9;padding:.7em 1em;-webkit-transition:all .2s linear;transition:all .2s linear;color:#fff;background-color:#2980b9;cursor:pointer;display:none;position:fixed;top:64px;left:0;padding:.2em .3em;font-size:1.5rem;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none;z-index:4}main.side-nav-layout button.nav.mobile:hover{border-radius:10px;border:1px solid #3498db;color:#fff;background-color:#3498db;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}@media only screen and (max-width:500px){main.side-nav-layout button.nav.mobile{display:block}}.page.home{position:relative}.page.home .headroom-wrapper{background-color:#3498db}@media only screen and (max-width:500px){.page.home .headroom-wrapper{height:64px!important}}.page.home main{padding:0;margin-top:-1px}.page.home section.splash{height:calc(100vh - 64px);background-color:#3498db;display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:vertical;-moz-box-orient:vertical;-o-box-orient:vertical;-webkit-box-lines:single;-moz-box-lines:single;-o-box-lines:single;-ms-flex-flow:column nowrap;flex-flow:column;-webkit-box-pack:center;-o-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-o-box-align:center;-ms-flex-align:center;align-items:center;color:#fff;font-size:1.7rem;text-align:center}@media only screen and (max-width:500px){.page.home section.splash{font-size:1.3rem}}.page.home section.splash .logo{display:block;-webkit-transition:all .3s linear;transition:all .3s linear;width:144px;height:144px;margin:0 0 .5em;background-image:url("/img/logo.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.splash .logo{background-image:url("/img/logo@2x.png");background-size:contain}}@media only screen and (max-width:500px){.page.home section.splash .logo{width:96px;height:96px}}.page.home section.splash p.tagline{margin:.7em 0;font-size:120%;line-height:1.2em;width:50%}@media only screen and (max-width:800px){.page.home section.splash p.tagline{width:80%;margin-bottom:0}}.page.home section.splash .actions{margin:1em 0 2em}@media only screen and (max-width:500px){.page.home section.splash .actions{margin-bottom:1em}}.page.home section.splash .actions a{border-radius:10px;border:1px solid #fff;padding:.7em 1em;-webkit-transition:all .2s linear;transition:all .2s linear;color:#fff;background-color:transparent;cursor:pointer;font-size:80%;margin:0 .5em}.page.home section.splash .actions a:hover{border-radius:10px;border:1px solid #fff;color:#3498db;background-color:#fff}@media only screen and (max-width:500px){.page.home section.splash .actions a{display:block;margin:.5em auto;font-size:100%}}.page.home section.splash .install{font-size:60%;padding:.3em .4em;background-color:#2c3e50;border-radius:5px}.page.home section.splash .meta{margin-top:1.2em}.page.home section.splash .meta a{text-decoration:none;border:1px solid transparent;-webkit-transition:all .2s linear;transition:all .2s linear;padding:0 .5em;border-radius:5px;font-size:50%;color:#fff;margin:0 .5em}.page.home section.splash .meta a.active,.page.home section.splash .meta a:hover{color:#000;background-color:#fff;border:1px solid transparent}.page.home section.splash .meta a i+span{margin-left:.3em}.page.home section.features-1{padding:1em}.page.home section.features-1 .intro{width:80%;font-size:2.2rem;text-align:center;margin:1em auto 1.5em;line-height:1.5em}@media only screen and (max-width:500px){.page.home section.features-1 .intro{font-size:1.8rem}}.page.home section.features-1 ul{display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-o-box-orient:horizontal;-webkit-box-lines:multiple;-moz-box-lines:multiple;-o-box-lines:multiple;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:justify;-o-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:start;-o-box-align:start;-ms-flex-align:start;align-items:flex-start;margin:0 auto;width:90%}@media only screen and (max-width:800px){.page.home section.features-1 ul{width:100%}}@media only screen and (max-width:500px){.page.home section.features-1 ul{-webkit-box-orient:vertical;-moz-box-orient:vertical;-o-box-orient:vertical;-webkit-box-lines:single;-moz-box-lines:single;-o-box-lines:single;-ms-flex-flow:column nowrap;flex-flow:column}}.page.home section.features-1 ul li{display:block;width:30%;font-size:1rem;margin:1.5em auto}@media only screen and (max-width:800px){.page.home section.features-1 ul li{width:40%}}@media only screen and (max-width:500px){.page.home section.features-1 ul li{display:block;width:100%}}.page.home section.features-1 ul li .title{display:inline-block;font-size:140%}.page.home section.features-1 ul li .title:before{display:inline-block;vertical-align:top;margin:0 .5em .3em 0;content:" ";width:32px;height:32px}.page.home section.features-1 ul li .description{margin-top:1em;line-height:1.4em}.page.home section.features-1 ul li:nth-child(1) .title:before{background-image:url("/img/icon-rocket.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(1) .title:before{background-image:url("/img/icon-rocket@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(2) .title:before{background-image:url("/img/icon-plugin.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(2) .title:before{background-image:url("/img/icon-plugin@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(3) .title:before{background-image:url("/img/icon-text-field.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(3) .title:before{background-image:url("/img/icon-text-field@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(4) .title:before{background-image:url("/img/icon-routing.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(4) .title:before{background-image:url("/img/icon-routing@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(5) .title:before{background-image:url("/img/icon-template.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(5) .title:before{background-image:url("/img/icon-template@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(6) .title:before{background-image:url("/img/icon-users.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(6) .title:before{background-image:url("/img/icon-users@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(7) .title:before{background-image:url("/img/icon-email.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(7) .title:before{background-image:url("/img/icon-email@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(8) .title:before{background-image:url("/img/icon-cron.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(8) .title:before{background-image:url("/img/icon-cron@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(9) .title:before{background-image:url("/img/icon-setup.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(9) .title:before{background-image:url("/img/icon-setup@2x.png");background-size:contain}}.page.home section.quick-start{margin:2em 0;background-color:#2c3e50;padding:3em 1em;color:#fff;text-align:center;font-size:1rem}@media only screen and (max-width:500px){.page.home section.quick-start{padding:1em;font-size:.8rem}}.page.home section.quick-start .wrapper{display:inline-block;width:80%;text-align:left}@media only screen and (max-width:500px){.page.home section.quick-start .wrapper{width:100%}}.page.home section.quick-start h2{display:block;font-size:200%;margin-bottom:.8em}.page.home section.quick-start div,.page.home section.quick-start pre{display:inline-block}.page.home section.quick-start pre{line-height:1.5em;background-color:#000;width:40%;padding:1em;margin-right:2em}.page.home section.quick-start div{vertical-align:top;width:50%;font-size:110%;line-height:1.3em}.page.home section.quick-start div p{margin-bottom:1em}@media only screen and (max-width:800px){.page.home section.quick-start pre{display:block;width:100%}.page.home section.quick-start div{display:block;margin-top:1.5em;line-height:1.5em;width:100%}}.page.home section.next-links{margin-top:2em;display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-o-box-orient:horizontal;-webkit-box-lines:multiple;-moz-box-lines:multiple;-o-box-lines:multiple;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:center;-o-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-o-box-align:center;-ms-flex-align:center;align-items:center;font-size:1rem}.page.home section.next-links>div{margin:2em 0;text-align:center}@media only screen and (max-width:500px){.page.home section.next-links>div{margin:1em 0}}.page.home section.next-links>div a{border-radius:10px;border:1px solid #3498db;padding:.7em 1em;-webkit-transition:all .2s linear;transition:all .2s linear;color:#3498db;background-color:transparent;cursor:pointer;display:inline-block;margin:0 .5em;font-size:140%}.page.home section.next-links>div a:hover{border-radius:10px;border:1px solid #3498db;color:#fff;background-color:#3498db}.page.home section.next-links>div p{width:70%;margin:1em auto 0;line-height:1.2em}.page.guide{position:relative}.page.guide section.content h1{font-size:250%;margin:0 0 1em;line-height:1em}.page.guide section.content h2{font-size:160%;margin:1.5em 0 1em;line-height:1em}.page.guide section.content h3{font-size:130%;margin:1.5em 0 1em;line-height:1em}.page.guide section.content p{margin:1em 0}.page.guide section.content em{font-style:italic;font-size:90%}.page.guide section.content ol{list-style:decimal}.page.guide section.content ul{list-style:disc}.page.guide section.content ol,.page.guide section.content ul{margin:1em 0 1em 3em}.page.guide section.content ol li,.page.guide section.content ul li{padding:.2em 0}.page.guide section.content code[class*=hljs]{display:block;border-radius:5px;word-wrap:normal;margin-bottom:1.7em}.page.guide section.content code:not([class*=hljs]){display:inline;font-size:110%;padding:.1em .2em;background-color:#ecf0f1;border-radius:5px}.page.guide section.content a.github-edit-link{border-bottom:none;position:absolute;font-size:70%;text-transform:lowercase;top:0;right:0;filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(0deg);transform:rotate(0deg)}.page.guide section.content a.github-edit-link:before{content:"\F044";margin-right:.2em}.page.api{position:relative}.page.api main.side-nav-layout aside{font-size:.8rem}</style></head><body><div id="react-mount"><div class="page guide" data-reactroot="" data-reactid="1" data-react-checksum="-122792277"><div class="headroom-wrapper" data-reactid="2"><div style="position:relative;top:0;left:0;right:0;z-index:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);" class="headroom headroom--unfixed" data-reactid="3"><header data-reactid="4"><section class="brand" data-reactid="5"><a href="/" data-reactid="6">Waigo.js</a></section><button class="mobile-toggle" data-reactid="7"><i class="menu" data-reactid="8"></i></button><ul class="nav" data-reactid="9"><li class="" data-reactid="10"><a title="Documentation guide" class="active" href="/docs/introduction/motivation/" data-reactid="11">Guide</a></li><li class="" data-reactid="12"><a title="API docs" class="" href="/api/" data-reactid="13">API</a></li><li class="social" data-reactid="14"><a title="Twitter" href="https://twitter.com/waigojs" class="" data-reactid="15"><i class="twitter" data-reactid="16"></i></a></li><li class="social" data-reactid="17"><a title="Github" href="https://github.com/waigo/waigo" class="" data-reactid="18"><i class="github" data-reactid="19"></i></a></li><li class="social" data-reactid="20"><a title="Discuss" href="https://discord.gg/Jf3pGjf" class="" data-reactid="21"><i class="discuss" data-reactid="22"></i></a></li></ul></header></div></div><main class="side-nav-layout" data-reactid="23"><button class="nav mobile" title="Toggle nav menu" data-reactid="24"><i class="arrow right" data-reactid="25"></i></button><aside class="" data-reactid="26"><ul data-reactid="27"><li class="" data-reactid="28"><a href="/docs/introduction/" data-reactid="29">Introduction</a><ul data-reactid="30"><li class="" data-reactid="31"><a href="/docs/introduction/motivation/" data-reactid="32">Motivation</a></li><li class="" data-reactid="33"><a href="/docs/introduction/middlewareprimer/" data-reactid="34">Middleware primer</a></li><li class="" data-reactid="35"><a href="/docs/introduction/folderstructure/" data-reactid="36">Folder structure</a></li><li class="" data-reactid="37"><a href="/docs/introduction/codingstandard/" data-reactid="38">Coding standard</a></li></ul></li><li class="" data-reactid="39"><a href="/docs/gettingstarted/" data-reactid="40">Getting Started</a><ul data-reactid="41"><li class="" data-reactid="42"><a href="/docs/gettingstarted/requirements/" data-reactid="43">Requirements</a></li><li class="" data-reactid="44"><a href="/docs/gettingstarted/installation/" data-reactid="45">Installation</a></li><li class="" data-reactid="46"><a href="/docs/gettingstarted/runninghelloworld/" data-reactid="47">Running &quot;Hello World&quot;</a></li><li class="" data-reactid="48"><a href="/docs/gettingstarted/buildworkflowlivereload/" data-reactid="49">Build workflow and Live reload</a></li></ul></li><li class="" data-reactid="50"><a href="/docs/extendandoverride/" data-reactid="51">Extend and Override</a><ul data-reactid="52"><li class="" data-reactid="53"><a href="/docs/extendandoverride/moduleloader/" data-reactid="54">Module Loader</a></li><li class="" data-reactid="55"><a href="/docs/extendandoverride/usingplugins/" data-reactid="56">Using Plugins</a></li><li class="" data-reactid="57"><a href="/docs/extendandoverride/creatingplugins/" data-reactid="58">Creating Plugins</a></li></ul></li><li class="" data-reactid="59"><a href="/docs/commandline/" data-reactid="60">Command-Line (CLI)</a><ul data-reactid="61"><li class="" data-reactid="62"><a href="/docs/commandline/usingthecli/" data-reactid="63">Using the CLI</a></li><li class="" data-reactid="64"><a href="/docs/commandline/creatingcustomcommands/" data-reactid="65">Creating custom commands</a></li></ul></li><li class="" data-reactid="66"><a href="/docs/appconfiguration/" data-reactid="67">App configuration</a><ul data-reactid="68"><li class="" data-reactid="69"><a href="/docs/appconfiguration/appobject/" data-reactid="70">App object</a></li><li class="" data-reactid="71"><a href="/docs/appconfiguration/configuration/" data-reactid="72">Configuration</a></li><li class="" data-reactid="73"><a href="/docs/appconfiguration/startupsteps/" data-reactid="74">Startup steps</a></li><li class="" data-reactid="75"><a href="/docs/appconfiguration/shutdownsteps/" data-reactid="76">Shutdown steps</a></li></ul></li><li class="" data-reactid="77"><a href="/docs/logging/" data-reactid="78">Logging</a><ul data-reactid="79"><li class="" data-reactid="80"><a href="/docs/logging/howtouse/" data-reactid="81">How to use</a></li><li class="" data-reactid="82"><a href="/docs/logging/subcategories/" data-reactid="83">Sub-categories</a></li></ul></li><li class="" data-reactid="84"><a href="/docs/events/" data-reactid="85">Events</a></li><li class="" data-reactid="86"><a href="/docs/errorhandling/" data-reactid="87">Error handling</a><ul data-reactid="88"><li class="" data-reactid="89"><a href="/docs/errorhandling/builtinerrorclasses/" data-reactid="90">Built-in Error classes</a></li><li class="" data-reactid="91"><a href="/docs/errorhandling/creatingyourown/" data-reactid="92">Creating your own</a></li><li class="" data-reactid="93"><a href="/docs/errorhandling/errormiddleware/" data-reactid="94">Error middleware</a></li></ul></li><li class="" data-reactid="95"><a href="/docs/middleware/" data-reactid="96">Middleware</a><ul data-reactid="97"><li class="" data-reactid="98"><a href="/docs/middleware/defining/" data-reactid="99">Defining</a></li><li class="" data-reactid="100"><a href="/docs/middleware/configuring/" data-reactid="101">Configuring</a></li><li class="" data-reactid="102"><a href="/docs/middleware/commonmiddleware/" data-reactid="103">Common middleware</a></li></ul></li><li class="" data-reactid="104"><a href="/docs/controllers/" data-reactid="105">Controllers</a></li><li class="active" data-reactid="106"><a href="/docs/databaseandmodels/" data-reactid="107">Database and Models</a><ul data-reactid="108"><li class="" data-reactid="109"><a href="/docs/databaseandmodels/databaseconnections/" data-reactid="110">Database connections</a></li><li class="" data-reactid="111"><a href="/docs/databaseandmodels/overviewofmodels/" data-reactid="112">Overview of models</a></li><li class="active" data-reactid="113"><a href="/docs/databaseandmodels/definingandusingmodels/" data-reactid="114">Defining and using models</a></li><li class="" data-reactid="115"><a href="/docs/databaseandmodels/builtinmodels/" data-reactid="116">Built-in models</a></li><li class="" data-reactid="117"><a href="/docs/databaseandmodels/reactiveupdates/" data-reactid="118">Reactive updates</a></li></ul></li><li class="" data-reactid="119"><a href="/docs/routing/" data-reactid="120">Routing</a><ul data-reactid="121"><li class="" data-reactid="122"><a href="/docs/routing/howtouse/" data-reactid="123">How to use</a></li><li class="" data-reactid="124"><a href="/docs/routing/generatingurls/" data-reactid="125">Generating URLs</a></li></ul></li><li class="" data-reactid="126"><a href="/docs/renderingoutput/" data-reactid="127">Rendering output</a><ul data-reactid="128"><li class="" data-reactid="129"><a href="/docs/renderingoutput/enabling/" data-reactid="130">Enabling</a></li><li class="" data-reactid="131"><a href="/docs/renderingoutput/renderingmethods/" data-reactid="132">Rendering methods</a></li><li class="" data-reactid="133"><a href="/docs/renderingoutput/jsonoutput/" data-reactid="134">JSON output</a></li><li class="" data-reactid="135"><a href="/docs/renderingoutput/settingoutputformat/" data-reactid="136">Setting the output format</a></li><li class="" data-reactid="137"><a href="/docs/renderingoutput/customformats/" data-reactid="138">Custom formats</a></li></ul></li><li class="" data-reactid="139"><a href="/docs/viewtemplates/" data-reactid="140">View templates</a><ul data-reactid="141"><li class="" data-reactid="142"><a href="/docs/viewtemplates/templatedata/" data-reactid="143">Template data</a></li><li class="" data-reactid="144"><a href="/docs/viewtemplates/contextlevelandappleveldata/" data-reactid="145">Context-level and app-level data</a></li></ul></li><li class="" data-reactid="146"><a href="/docs/staticresources/" data-reactid="147">Static resources</a><ul data-reactid="148"><li class="" data-reactid="149"><a href="/docs/staticresources/collationofstaticresources/" data-reactid="150">Collation of static resources</a></li><li class="" data-reactid="151"><a href="/docs/staticresources/requestmiddleware/" data-reactid="152">Request middleware</a></li><li class="" data-reactid="153"><a href="/docs/staticresources/generatingurlpaths/" data-reactid="154">Generating URL paths</a></li></ul></li><li class="" data-reactid="155"><a href="/docs/sessions/" data-reactid="156">Sessions</a></li><li class="" data-reactid="157"><a href="/docs/forms/" data-reactid="158">Forms</a><ul data-reactid="159"><li class="" data-reactid="160"><a href="/docs/forms/definingandusing/" data-reactid="161">Defining and using</a></li><li class="" data-reactid="162"><a href="/docs/forms/stateanddirtychecking/" data-reactid="163">State and dirty-checking</a></li><li class="" data-reactid="164"><a href="/docs/forms/sanitizers/" data-reactid="165">Sanitizers</a></li><li class="" data-reactid="166"><a href="/docs/forms/validators/" data-reactid="167">Validators</a></li><li class="" data-reactid="168"><a href="/docs/forms/postvalidationhooks/" data-reactid="169">Post-validation hooks</a></li><li class="" data-reactid="170"><a href="/docs/forms/builtinfieldtypes/" data-reactid="171">Built-in field types</a></li><li class="" data-reactid="172"><a href="/docs/forms/customfieldtypes/" data-reactid="173">Custom field types</a></li></ul></li><li class="" data-reactid="174"><a href="/docs/scaling/" data-reactid="175">Scaling</a><ul data-reactid="176"><li class="" data-reactid="177"><a href="/docs/scaling/multiprocessclustering/" data-reactid="178">Multi-process clustering</a></li></ul></li><li class="" data-reactid="179"><a href="/docs/bestpractices/" data-reactid="180">Best practices</a></li></ul></aside><section class="content" data-reactid="181"><div data-reactid="182"><a class="github-edit-link" href="https://github.com/waigo/waigo/tree/master/docs/DatabaseAndModels/DefiningAndUsingModels.md" data-reactid="183">Edit page</a><div data-reactid="184"><h1 data-reactid="185"><!-- react-text: 186 -->Defining and using models<!-- /react-text --></h1><!-- react-text: 187 -->
<!-- /react-text --><p data-reactid="188"><!-- react-text: 189 -->A model is defined as file under the <!-- /react-text --><code data-reactid="190"><!-- react-text: 191 -->src/models<!-- /react-text --></code><!-- react-text: 192 --> path. It must export a table schema definition and may optionally export definitions for virtual fields, model methods and document instance methods.<!-- /react-text --></p><!-- react-text: 193 -->
<!-- /react-text --><h2 data-reactid="194"><!-- react-text: 195 -->Schema<!-- /react-text --></h2><!-- react-text: 196 -->
<!-- /react-text --><p data-reactid="197"><!-- react-text: 198 -->At a bare minimum our model must export a <!-- /react-text --><code data-reactid="199"><!-- react-text: 200 -->schema<!-- /react-text --></code><!-- react-text: 201 -->:<!-- /react-text --></p><!-- react-text: 202 -->
<!-- /react-text --><pre data-reactid="203"><code class="language-javascript hljs" data-reactid="204"><span class="hljs-comment" data-reactid="205"><!-- react-text: 206 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 207 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="208"><!-- react-text: 209 -->const<!-- /react-text --></span><!-- react-text: 210 --> ProfileSchema = {
  displayName: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="211"><!-- react-text: 212 -->String<!-- /react-text --></span><!-- react-text: 213 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="214"><!-- react-text: 215 -->true<!-- /react-text --></span><!-- react-text: 216 --> 
  },
};

exports.schema = {
  username: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="217"><!-- react-text: 218 -->String<!-- /react-text --></span><!-- react-text: 219 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="220"><!-- react-text: 221 -->true<!-- /react-text --></span><!-- react-text: 222 -->,
  },
  password: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="223"><!-- react-text: 224 -->String<!-- /react-text --></span><!-- react-text: 225 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="226"><!-- react-text: 227 -->true<!-- /react-text --></span><!-- react-text: 228 -->,
  },
  profile: { 
    type: ProfileSchema, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="229"><!-- react-text: 230 -->false<!-- /react-text --></span><!-- react-text: 231 -->,
  },
  lastLogin: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="232"><!-- react-text: 233 -->Date<!-- /react-text --></span><!-- react-text: 234 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="235"><!-- react-text: 236 -->false<!-- /react-text --></span><!-- react-text: 237 -->,
  },
};
<!-- /react-text --></code></pre><!-- react-text: 238 -->
<!-- /react-text --><p data-reactid="239"><em data-reactid="240"><!-- react-text: 241 -->Note: Thinodium uses the <!-- /react-text --><a href="https://github.com/hiddentao/simple-nosql-schema" data-reactid="242"><!-- react-text: 243 -->simple-nosql-schema<!-- /react-text --></a><!-- react-text: 244 --> module to validate schemas. Check it out to find out about the different types and options possible for each field defined in the schema<!-- /react-text --></em><!-- react-text: 245 -->.<!-- /react-text --></p><!-- react-text: 246 -->
<!-- /react-text --><p data-reactid="247"><!-- react-text: 248 -->The above schema specifies four fields for the database table - <!-- /react-text --><code data-reactid="249"><!-- react-text: 250 -->username<!-- /react-text --></code><!-- react-text: 251 -->, <!-- /react-text --><code data-reactid="252"><!-- react-text: 253 -->password<!-- /react-text --></code><!-- react-text: 254 -->, <!-- /react-text --><code data-reactid="255"><!-- react-text: 256 -->profile<!-- /react-text --></code><!-- react-text: 257 --> and <!-- /react-text --><code data-reactid="258"><!-- react-text: 259 -->lastLogin<!-- /react-text --></code><!-- react-text: 260 --> - with the first two fields being mandatory for any new rows that are to be inserted into the table. The <!-- /react-text --><code data-reactid="261"><!-- react-text: 262 -->profile<!-- /react-text --></code><!-- react-text: 263 --> field value is a nested document which must contain atleast a <!-- /react-text --><code data-reactid="264"><!-- react-text: 265 -->displayName<!-- /react-text --></code><!-- react-text: 266 --> key. The <!-- /react-text --><code data-reactid="267"><!-- react-text: 268 -->lastLogin<!-- /react-text --></code><!-- react-text: 269 --> field is of type <!-- /react-text --><code data-reactid="270"><!-- react-text: 271 -->Date<!-- /react-text --></code><!-- react-text: 272 --> meaning that in the database it is stored as a date timestamp.<!-- /react-text --></p><!-- react-text: 273 -->
<!-- /react-text --><p data-reactid="274"><!-- react-text: 275 -->Using this model is simple:<!-- /react-text --></p><!-- react-text: 276 -->
<!-- /react-text --><pre data-reactid="277"><code class="language-javascript hljs" data-reactid="278"><span class="hljs-comment" data-reactid="279"><!-- react-text: 280 -->// file: &lt;project folder&gt;/src/controllers/index.js<!-- /react-text --></span><!-- react-text: 281 -->

exports.add = <!-- /react-text --><span class="hljs-function" data-reactid="282"><span class="hljs-keyword" data-reactid="283"><!-- react-text: 284 -->function<!-- /react-text --></span><!-- react-text: 285 -->*(<!-- /react-text --><span class="hljs-params" data-reactid="286"></span><!-- react-text: 287 -->) <!-- /react-text --></span><!-- react-text: 288 -->{
  <!-- /react-text --><span class="hljs-keyword" data-reactid="289"><!-- react-text: 290 -->let<!-- /react-text --></span><!-- react-text: 291 --> user = <!-- /react-text --><span class="hljs-keyword" data-reactid="292"><!-- react-text: 293 -->yield<!-- /react-text --></span><!-- react-text: 294 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="295"><!-- react-text: 296 -->this<!-- /react-text --></span><!-- react-text: 297 -->.App.models.User.insert({
  	username: <!-- /react-text --><span class="hljs-string" data-reactid="298"><!-- react-text: 299 -->&#x27;test@test.com&#x27;<!-- /react-text --></span><!-- react-text: 300 -->,
  	password: <!-- /react-text --><span class="hljs-string" data-reactid="301"><!-- react-text: 302 -->&#x27;password&#x27;<!-- /react-text --></span><!-- react-text: 303 -->,
  	profile: {
	  displayName: <!-- /react-text --><span class="hljs-string" data-reactid="304"><!-- react-text: 305 -->&#x27;test user&#x27;<!-- /react-text --></span><!-- react-text: 306 -->
  	}
  });
  
  <!-- /react-text --><span class="hljs-keyword" data-reactid="307"><!-- react-text: 308 -->this<!-- /react-text --></span><!-- react-text: 309 -->.body = user.username;	<!-- /react-text --><span class="hljs-comment" data-reactid="310"><!-- react-text: 311 -->// test@test.com<!-- /react-text --></span><!-- react-text: 312 -->
}
<!-- /react-text --></code></pre><!-- react-text: 313 -->
<!-- /react-text --><p data-reactid="314"><!-- react-text: 315 -->We can fetch all rows at any time:<!-- /react-text --></p><!-- react-text: 316 -->
<!-- /react-text --><pre data-reactid="317"><code class="language-javascript hljs" data-reactid="318"><span class="hljs-comment" data-reactid="319"><!-- react-text: 320 -->// ...continuing from previous example...<!-- /react-text --></span><!-- react-text: 321 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="322"><!-- react-text: 323 -->let<!-- /react-text --></span><!-- react-text: 324 --> allUsers = <!-- /react-text --><span class="hljs-keyword" data-reactid="325"><!-- react-text: 326 -->yield<!-- /react-text --></span><!-- react-text: 327 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="328"><!-- react-text: 329 -->this<!-- /react-text --></span><!-- react-text: 330 -->.App.models.User.getAll();

<!-- /react-text --><span class="hljs-comment" data-reactid="331"><!-- react-text: 332 -->/* allUsers.length === 1 */<!-- /react-text --></span><!-- react-text: 333 -->

<!-- /react-text --><span class="hljs-built_in" data-reactid="334"><!-- react-text: 335 -->console<!-- /react-text --></span><!-- react-text: 336 -->.log( allUsers[<!-- /react-text --><span class="hljs-number" data-reactid="337"><!-- react-text: 338 -->0<!-- /react-text --></span><!-- react-text: 339 -->].username );	  <!-- /react-text --><span class="hljs-comment" data-reactid="340"><!-- react-text: 341 -->/* test@test.com */<!-- /react-text --></span><!-- react-text: 342 -->
<!-- /react-text --></code></pre><!-- react-text: 343 -->
<!-- /react-text --><p data-reactid="344"><!-- react-text: 345 -->Every database table row has a unique <!-- /react-text --><code data-reactid="346"><!-- react-text: 347 -->id<!-- /react-text --></code><!-- react-text: 348 --> field (the primary key) which is auto-generated by the database engine. This can be used to quickly fetch an item we’ve previously inserted:<!-- /react-text --></p><!-- react-text: 349 -->
<!-- /react-text --><pre data-reactid="350"><code class="language-javascript hljs" data-reactid="351"><span class="hljs-comment" data-reactid="352"><!-- react-text: 353 -->// ...continuing from previous example...<!-- /react-text --></span><!-- react-text: 354 -->

<!-- /react-text --><span class="hljs-comment" data-reactid="355"><!-- react-text: 356 -->// reload user from db<!-- /react-text --></span><!-- react-text: 357 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="358"><!-- react-text: 359 -->let<!-- /react-text --></span><!-- react-text: 360 --> addedUser = <!-- /react-text --><span class="hljs-keyword" data-reactid="361"><!-- react-text: 362 -->yield<!-- /react-text --></span><!-- react-text: 363 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="364"><!-- react-text: 365 -->this<!-- /react-text --></span><!-- react-text: 366 -->.App.models.User.get(user.id);
<!-- /react-text --></code></pre><!-- react-text: 367 -->
<!-- /react-text --><p data-reactid="368"><!-- react-text: 369 -->We can update a user’s attributes:<!-- /react-text --></p><!-- react-text: 370 -->
<!-- /react-text --><pre data-reactid="371"><code class="language-javascript hljs" data-reactid="372"><span class="hljs-comment" data-reactid="373"><!-- react-text: 374 -->// ...continuing from previous example...<!-- /react-text --></span><!-- react-text: 375 -->

<!-- /react-text --><span class="hljs-comment" data-reactid="376"><!-- react-text: 377 -->// update username<!-- /react-text --></span><!-- react-text: 378 -->
user.username = <!-- /react-text --><span class="hljs-string" data-reactid="379"><!-- react-text: 380 -->&#x27;test2@domain.com&#x27;<!-- /react-text --></span><!-- react-text: 381 -->;
<!-- /react-text --><span class="hljs-keyword" data-reactid="382"><!-- react-text: 383 -->yield<!-- /react-text --></span><!-- react-text: 384 --> user.save();
<!-- /react-text --></code></pre><!-- react-text: 385 -->
<!-- /react-text --><p data-reactid="386"><!-- react-text: 387 -->We can also remove the user.<!-- /react-text --></p><!-- react-text: 388 -->
<!-- /react-text --><pre data-reactid="389"><code class="language-javascript hljs" data-reactid="390"><span class="hljs-comment" data-reactid="391"><!-- react-text: 392 -->// ...continuing from previous example...<!-- /react-text --></span><!-- react-text: 393 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="394"><!-- react-text: 395 -->yield<!-- /react-text --></span><!-- react-text: 396 --> user.remove();

<!-- /react-text --><span class="hljs-keyword" data-reactid="397"><!-- react-text: 398 -->let<!-- /react-text --></span><!-- react-text: 399 --> addedUser = <!-- /react-text --><span class="hljs-keyword" data-reactid="400"><!-- react-text: 401 -->yield<!-- /react-text --></span><!-- react-text: 402 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="403"><!-- react-text: 404 -->this<!-- /react-text --></span><!-- react-text: 405 -->.App.models.User.get(user.id);

<!-- /react-text --><span class="hljs-comment" data-reactid="406"><!-- react-text: 407 -->/* addedUser === null */<!-- /react-text --></span><!-- react-text: 408 -->
<!-- /react-text --></code></pre><!-- react-text: 409 -->
<!-- /react-text --><p data-reactid="410"><em data-reactid="411"><!-- react-text: 412 -->Note: Read the <!-- /react-text --><a href="https://hiddentao.github.io/thinodium" data-reactid="413"><!-- react-text: 414 -->Thinodium docs<!-- /react-text --></a><!-- react-text: 415 --> for the full model API.<!-- /react-text --></em></p><!-- react-text: 416 -->
<!-- /react-text --><h2 data-reactid="417"><!-- react-text: 418 -->Indexes<!-- /react-text --></h2><!-- react-text: 419 -->
<!-- /react-text --><p data-reactid="420"><!-- react-text: 421 -->To speed up lookups on heavily-used tables we can and should add <!-- /react-text --><em data-reactid="422"><!-- react-text: 423 -->indexes<!-- /react-text --></em><!-- react-text: 424 -->:<!-- /react-text --></p><!-- react-text: 425 -->
<!-- /react-text --><pre data-reactid="426"><code class="language-javascript hljs" data-reactid="427"><span class="hljs-comment" data-reactid="428"><!-- react-text: 429 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 430 -->

exports.schema = {
  username: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="431"><!-- react-text: 432 -->String<!-- /react-text --></span><!-- react-text: 433 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="434"><!-- react-text: 435 -->true<!-- /react-text --></span><!-- react-text: 436 -->,
  },
  password: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="437"><!-- react-text: 438 -->String<!-- /react-text --></span><!-- react-text: 439 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="440"><!-- react-text: 441 -->true<!-- /react-text --></span><!-- react-text: 442 -->,
  },
  roles: { 
    type: [<!-- /react-text --><span class="hljs-built_in" data-reactid="443"><!-- react-text: 444 -->String<!-- /react-text --></span><!-- react-text: 445 -->], 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="446"><!-- react-text: 447 -->false<!-- /react-text --></span><!-- react-text: 448 -->,
  },  
};

exports.indexes = {
  {
    name: <!-- /react-text --><span class="hljs-string" data-reactid="449"><!-- react-text: 450 -->&#x27;username&#x27;<!-- /react-text --></span><!-- react-text: 451 -->,
  },
  {
    name: <!-- /react-text --><span class="hljs-string" data-reactid="452"><!-- react-text: 453 -->&#x27;roles&#x27;<!-- /react-text --></span><!-- react-text: 454 -->,
    options: {
      multi: <!-- /react-text --><span class="hljs-literal" data-reactid="455"><!-- react-text: 456 -->true<!-- /react-text --></span><!-- react-text: 457 -->,
    },
  },    
};
<!-- /react-text --></code></pre><!-- react-text: 458 -->
<!-- /react-text --><p data-reactid="459"><!-- react-text: 460 -->We’ve asked for two indexes - one on the <!-- /react-text --><code data-reactid="461"><!-- react-text: 462 -->username<!-- /react-text --></code><!-- react-text: 463 --> field and one on the <!-- /react-text --><code data-reactid="464"><!-- react-text: 465 -->roles<!-- /react-text --></code><!-- react-text: 466 --> field with the additonal setting that it should be treated as being able to hold multiple values (because <!-- /react-text --><code data-reactid="467"><!-- react-text: 468 -->roles<!-- /react-text --></code><!-- react-text: 469 --> specifies an array of strings).<!-- /react-text --></p><!-- react-text: 470 -->
<!-- /react-text --><p data-reactid="471"><!-- react-text: 472 -->From now on lookup by username and/or role will be quicker than before.<!-- /react-text --></p><!-- react-text: 473 -->
<!-- /react-text --><p data-reactid="474"><em data-reactid="475"><!-- react-text: 476 -->Note: More complex compound indexes are supported - check out Waigo’s built-in models for real examples.<!-- /react-text --></em></p><!-- react-text: 477 -->
<!-- /react-text --><h2 data-reactid="478"><!-- react-text: 479 -->Primary key<!-- /react-text --></h2><!-- react-text: 480 -->
<!-- /react-text --><p data-reactid="481"><!-- react-text: 482 -->By default the <!-- /react-text --><code data-reactid="483"><!-- react-text: 484 -->id<!-- /react-text --></code><!-- react-text: 485 --> field (which is auto-defined by the database engine) is assumed to the primary key. But you can override this setting using the <!-- /react-text --><code data-reactid="486"><!-- react-text: 487 -->pk<!-- /react-text --></code><!-- react-text: 488 --> export:<!-- /react-text --></p><!-- react-text: 489 -->
<!-- /react-text --><pre data-reactid="490"><code class="language-javascript hljs" data-reactid="491"><span class="hljs-comment" data-reactid="492"><!-- react-text: 493 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 494 -->

exports.pk = <!-- /react-text --><span class="hljs-string" data-reactid="495"><!-- react-text: 496 -->&#x27;username&#x27;<!-- /react-text --></span><!-- react-text: 497 -->;
<!-- /react-text --></code></pre><!-- react-text: 498 -->
<!-- /react-text --><h2 data-reactid="499"><!-- react-text: 500 -->Model methods<!-- /react-text --></h2><!-- react-text: 501 -->
<!-- /react-text --><p data-reactid="502"><!-- react-text: 503 -->Model methods are the methods available on the model object itself. There are a number of built-in methods - <!-- /react-text --><code data-reactid="504"><!-- react-text: 505 -->get()<!-- /react-text --></code><!-- react-text: 506 -->, <!-- /react-text --><code data-reactid="507"><!-- react-text: 508 -->insert()<!-- /react-text --></code><!-- react-text: 509 -->, etc - provided by Waigo. But it is a good idea to add custom methods as a convenience and in order to control access.<!-- /react-text --></p><!-- react-text: 510 -->
<!-- /react-text --><p data-reactid="511"><!-- react-text: 512 -->For example, let’s say we wish to hash a new user’s password before inserting it. We will provide an <!-- /react-text --><code data-reactid="513"><!-- react-text: 514 -->add()<!-- /react-text --></code><!-- react-text: 515 --> method to add a user, and a <!-- /react-text --><code data-reactid="516"><!-- react-text: 517 -->load()<!-- /react-text --></code><!-- react-text: 518 --> method to fetch a user given username and password:<!-- /react-text --></p><!-- react-text: 519 -->
<!-- /react-text --><pre data-reactid="520"><code class="language-javascript hljs" data-reactid="521"><span class="hljs-comment" data-reactid="522"><!-- react-text: 523 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 524 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="525"><!-- react-text: 526 -->const<!-- /react-text --></span><!-- react-text: 527 --> waigo = <!-- /react-text --><span class="hljs-built_in" data-reactid="528"><!-- react-text: 529 -->require<!-- /react-text --></span><!-- react-text: 530 -->(<!-- /react-text --><span class="hljs-string" data-reactid="531"><!-- react-text: 532 -->&#x27;waigo&#x27;<!-- /react-text --></span><!-- react-text: 533 -->),
	_ = waigo._;	<!-- /react-text --><span class="hljs-comment" data-reactid="534"><!-- react-text: 535 -->// lodash<!-- /react-text --></span><!-- react-text: 536 -->

exports.schema = {
  username: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="537"><!-- react-text: 538 -->String<!-- /react-text --></span><!-- react-text: 539 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="540"><!-- react-text: 541 -->true<!-- /react-text --></span><!-- react-text: 542 -->,
  },
  password: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="543"><!-- react-text: 544 -->String<!-- /react-text --></span><!-- react-text: 545 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="546"><!-- react-text: 547 -->true<!-- /react-text --></span><!-- react-text: 548 -->,
  },
};

exports.modelMethods = {
  add: <!-- /react-text --><span class="hljs-function" data-reactid="549"><span class="hljs-keyword" data-reactid="550"><!-- react-text: 551 -->function<!-- /react-text --></span><!-- react-text: 552 -->*(<!-- /react-text --><span class="hljs-params" data-reactid="553"><!-- react-text: 554 -->username, password<!-- /react-text --></span><!-- react-text: 555 -->) <!-- /react-text --></span><!-- react-text: 556 -->{
    <!-- /react-text --><span class="hljs-keyword" data-reactid="557"><!-- react-text: 558 -->this<!-- /react-text --></span><!-- react-text: 559 -->._logger.info(<!-- /react-text --><span class="hljs-string" data-reactid="560"><!-- react-text: 561 -->`Adding user: <!-- /react-text --><span class="hljs-subst" data-reactid="562"><!-- react-text: 563 -->${username}<!-- /react-text --></span><!-- react-text: 564 -->`<!-- /react-text --></span><!-- react-text: 565 -->);
    
    <!-- /react-text --><span class="hljs-keyword" data-reactid="566"><!-- react-text: 567 -->return<!-- /react-text --></span><!-- react-text: 568 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="569"><!-- react-text: 570 -->this<!-- /react-text --></span><!-- react-text: 571 -->.insert({
      username: username,
      password: someHashingFunction(password),
    });
  },
  
  load: <!-- /react-text --><span class="hljs-function" data-reactid="572"><span class="hljs-keyword" data-reactid="573"><!-- react-text: 574 -->function<!-- /react-text --></span><!-- react-text: 575 -->*(<!-- /react-text --><span class="hljs-params" data-reactid="576"><!-- react-text: 577 -->username, password<!-- /react-text --></span><!-- react-text: 578 -->) <!-- /react-text --></span><!-- react-text: 579 -->{
    <!-- /react-text --><span class="hljs-keyword" data-reactid="580"><!-- react-text: 581 -->this<!-- /react-text --></span><!-- react-text: 582 -->._logger.info(<!-- /react-text --><span class="hljs-string" data-reactid="583"><!-- react-text: 584 -->`Loading user: <!-- /react-text --><span class="hljs-subst" data-reactid="585"><!-- react-text: 586 -->${username}<!-- /react-text --></span><!-- react-text: 587 -->`<!-- /react-text --></span><!-- react-text: 588 -->);
    
    password = someHashingFunction(password);
    
    <!-- /react-text --><span class="hljs-keyword" data-reactid="589"><!-- react-text: 590 -->let<!-- /react-text --></span><!-- react-text: 591 --> ret = <!-- /react-text --><span class="hljs-keyword" data-reactid="592"><!-- react-text: 593 -->yield<!-- /react-text --></span><!-- react-text: 594 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="595"><!-- react-text: 596 -->this<!-- /react-text --></span><!-- react-text: 597 -->.rawQry().filter(<!-- /react-text --><span class="hljs-function" data-reactid="598"><span class="hljs-keyword" data-reactid="599"><!-- react-text: 600 -->function<!-- /react-text --></span><!-- react-text: 601 -->(<!-- /react-text --><span class="hljs-params" data-reactid="602"><!-- react-text: 603 -->user<!-- /react-text --></span><!-- react-text: 604 -->) <!-- /react-text --></span><!-- react-text: 605 -->{
      <!-- /react-text --><span class="hljs-keyword" data-reactid="606"><!-- react-text: 607 -->return<!-- /react-text --></span><!-- react-text: 608 --> user(<!-- /react-text --><span class="hljs-string" data-reactid="609"><!-- react-text: 610 -->&#x27;password&#x27;<!-- /react-text --></span><!-- react-text: 611 -->).eq(password).and(user(<!-- /react-text --><span class="hljs-string" data-reactid="612"><!-- react-text: 613 -->&#x27;username&#x27;<!-- /react-text --></span><!-- react-text: 614 -->).eq(username));
    }).run();
    
    <!-- /react-text --><span class="hljs-keyword" data-reactid="615"><!-- react-text: 616 -->this<!-- /react-text --></span><!-- react-text: 617 -->.wrapRaw(_.get(ret, <!-- /react-text --><span class="hljs-string" data-reactid="618"><!-- react-text: 619 -->&#x27;0&#x27;<!-- /react-text --></span><!-- react-text: 620 -->));
  }
};
<!-- /react-text --></code></pre><!-- react-text: 621 -->
<!-- /react-text --><p data-reactid="622"><!-- react-text: 623 -->The <!-- /react-text --><code data-reactid="624"><!-- react-text: 625 -->_logger()<!-- /react-text --></code><!-- react-text: 626 --> method we used inside the model methods gives us access to a <!-- /react-text --><a href="/docs/logging/" data-reactid="627">logger</a><!-- react-text: 628 --> associated with the Model - it is auto-created by Waigo. We can also access the <!-- /react-text --><code data-reactid="629"><!-- react-text: 630 -->App<!-- /react-text --></code><!-- react-text: 631 --> object at any time using the <!-- /react-text --><code data-reactid="632"><!-- react-text: 633 -->_App()<!-- /react-text --></code><!-- react-text: 634 --> method, though in this case we didn’t need to do this.<!-- /react-text --></p><!-- react-text: 635 -->
<!-- /react-text --><p data-reactid="636"><!-- react-text: 637 -->The <!-- /react-text --><code data-reactid="638"><!-- react-text: 639 -->rawQry()<!-- /react-text --></code><!-- react-text: 640 --> method is available on all Waigo models and enables the raw querying mode for our underlying database table. In this case it’s the same as executing a query using <!-- /react-text --><a href="https://github.com/neumino/rethinkdbdash" data-reactid="641"><!-- react-text: 642 -->rethinkdbdash<!-- /react-text --></a><!-- react-text: 643 -->, the RethinkDB database library that is being used at a lower level.<!-- /react-text --></p><!-- react-text: 644 -->
<!-- /react-text --><p data-reactid="645"><!-- react-text: 646 -->The <!-- /react-text --><code data-reactid="647"><!-- react-text: 648 -->wrapRaw()<!-- /react-text --></code><!-- react-text: 649 --> method wraps raw database data (as returned by using <!-- /react-text --><code data-reactid="650"><!-- react-text: 651 -->rawQry()<!-- /react-text --></code><!-- react-text: 652 -->) in our models’ document instances (see <!-- /react-text --><a href="https://hiddentao.github.io/thinodium" data-reactid="653"><!-- react-text: 654 -->Thinodium docs<!-- /react-text --></a><!-- react-text: 655 -->).<!-- /react-text --></p><!-- react-text: 656 -->
<!-- /react-text --><p data-reactid="657"><!-- react-text: 658 -->We would use this model as follows:<!-- /react-text --></p><!-- react-text: 659 -->
<!-- /react-text --><pre data-reactid="660"><code class="language-javascript hljs" data-reactid="661"><span class="hljs-keyword" data-reactid="662"><!-- react-text: 663 -->yield<!-- /react-text --></span><!-- react-text: 664 --> App.models.User.add(<!-- /react-text --><span class="hljs-string" data-reactid="665"><!-- react-text: 666 -->&#x27;test@test.com&#x27;<!-- /react-text --></span><!-- react-text: 667 -->, <!-- /react-text --><span class="hljs-string" data-reactid="668"><!-- react-text: 669 -->&#x27;password&#x27;<!-- /react-text --></span><!-- react-text: 670 -->);

<!-- /react-text --><span class="hljs-comment" data-reactid="671"><!-- react-text: 672 -->// let&#x27;s try loading, but with a wrong password<!-- /react-text --></span><!-- react-text: 673 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="674"><!-- react-text: 675 -->let<!-- /react-text --></span><!-- react-text: 676 --> user = <!-- /react-text --><span class="hljs-keyword" data-reactid="677"><!-- react-text: 678 -->yield<!-- /react-text --></span><!-- react-text: 679 --> App.models.User.load(<!-- /react-text --><span class="hljs-string" data-reactid="680"><!-- react-text: 681 -->&#x27;test@test.com&#x27;<!-- /react-text --></span><!-- react-text: 682 -->, <!-- /react-text --><span class="hljs-string" data-reactid="683"><!-- react-text: 684 -->&#x27;wrongpassword&#x27;<!-- /react-text --></span><!-- react-text: 685 -->);

<!-- /react-text --><span class="hljs-comment" data-reactid="686"><!-- react-text: 687 -->/* user === null */<!-- /react-text --></span><!-- react-text: 688 -->

<!-- /react-text --><span class="hljs-comment" data-reactid="689"><!-- react-text: 690 -->// let&#x27;s try loading with right password<!-- /react-text --></span><!-- react-text: 691 -->
user = <!-- /react-text --><span class="hljs-keyword" data-reactid="692"><!-- react-text: 693 -->yield<!-- /react-text --></span><!-- react-text: 694 --> App.models.User.load(<!-- /react-text --><span class="hljs-string" data-reactid="695"><!-- react-text: 696 -->&#x27;test@test.com&#x27;<!-- /react-text --></span><!-- react-text: 697 -->, <!-- /react-text --><span class="hljs-string" data-reactid="698"><!-- react-text: 699 -->&#x27;password&#x27;<!-- /react-text --></span><!-- react-text: 700 -->);

<!-- /react-text --><span class="hljs-built_in" data-reactid="701"><!-- react-text: 702 -->console<!-- /react-text --></span><!-- react-text: 703 -->.log(user.password);  <!-- /react-text --><span class="hljs-comment" data-reactid="704"><!-- react-text: 705 -->/* F24FA5B... some hash */<!-- /react-text --></span><!-- react-text: 706 -->
<!-- /react-text --></code></pre><!-- react-text: 707 -->
<!-- /react-text --><p data-reactid="708"><!-- react-text: 709 -->Notice above that <!-- /react-text --><code data-reactid="710"><!-- react-text: 711 -->user.password<!-- /react-text --></code><!-- react-text: 712 --> returns the hashed version of the password. Thus we wouldn’t be able to manually compare a password which the user has input with the the one in the documented returned by the model.<!-- /react-text --></p><!-- react-text: 713 -->
<!-- /react-text --><p data-reactid="714"><!-- react-text: 715 -->We can work around this using document methods.<!-- /react-text --></p><!-- react-text: 716 -->
<!-- /react-text --><h2 data-reactid="717"><!-- react-text: 718 -->Document methods<!-- /react-text --></h2><!-- react-text: 719 -->
<!-- /react-text --><p data-reactid="720"><!-- react-text: 721 -->Document methods are extra methods to enable on the document instances returned by our Model’s data retrieval methods.<!-- /react-text --></p><!-- react-text: 722 -->
<!-- /react-text --><p data-reactid="723"><em data-reactid="724"><!-- react-text: 725 -->Note: Waigo automatically adds <!-- /react-text --><code data-reactid="726"><!-- react-text: 727 -->_App()<!-- /react-text --></code><!-- react-text: 728 --> and <!-- /react-text --><code data-reactid="729"><!-- react-text: 730 -->_logger()<!-- /react-text --></code><!-- react-text: 731 --> methods to every document instance, same as for Model objects<!-- /react-text --></em><!-- react-text: 732 -->.<!-- /react-text --></p><!-- react-text: 733 -->
<!-- /react-text --><p data-reactid="734"><!-- react-text: 735 -->Let’s add a <!-- /react-text --><code data-reactid="736"><!-- react-text: 737 -->checkPassword()<!-- /react-text --></code><!-- react-text: 738 --> document method which lets us check whether a given password matches the password stored for a user:<!-- /react-text --></p><!-- react-text: 739 -->
<!-- /react-text --><pre data-reactid="740"><code class="language-javascript hljs" data-reactid="741"><span class="hljs-comment" data-reactid="742"><!-- react-text: 743 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 744 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="745"><!-- react-text: 746 -->const<!-- /react-text --></span><!-- react-text: 747 --> waigo = <!-- /react-text --><span class="hljs-built_in" data-reactid="748"><!-- react-text: 749 -->require<!-- /react-text --></span><!-- react-text: 750 -->(<!-- /react-text --><span class="hljs-string" data-reactid="751"><!-- react-text: 752 -->&#x27;waigo&#x27;<!-- /react-text --></span><!-- react-text: 753 -->),
	_ = waigo._;	<!-- /react-text --><span class="hljs-comment" data-reactid="754"><!-- react-text: 755 -->// lodash<!-- /react-text --></span><!-- react-text: 756 -->

exports.schema = {
  username: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="757"><!-- react-text: 758 -->String<!-- /react-text --></span><!-- react-text: 759 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="760"><!-- react-text: 761 -->true<!-- /react-text --></span><!-- react-text: 762 -->,
  },
  password: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="763"><!-- react-text: 764 -->String<!-- /react-text --></span><!-- react-text: 765 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="766"><!-- react-text: 767 -->true<!-- /react-text --></span><!-- react-text: 768 -->,
  },
};

exports.docMethods = {
  checkPassword: <!-- /react-text --><span class="hljs-function" data-reactid="769"><span class="hljs-keyword" data-reactid="770"><!-- react-text: 771 -->function<!-- /react-text --></span><!-- react-text: 772 -->*(<!-- /react-text --><span class="hljs-params" data-reactid="773"><!-- react-text: 774 -->password<!-- /react-text --></span><!-- react-text: 775 -->) <!-- /react-text --></span><!-- react-text: 776 -->{
    <!-- /react-text --><span class="hljs-keyword" data-reactid="777"><!-- react-text: 778 -->return<!-- /react-text --></span><!-- react-text: 779 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="780"><!-- react-text: 781 -->this<!-- /react-text --></span><!-- react-text: 782 -->.someHashingFunction(password) === <!-- /react-text --><span class="hljs-keyword" data-reactid="783"><!-- react-text: 784 -->this<!-- /react-text --></span><!-- react-text: 785 -->.password;
  },
};
<!-- /react-text --></code></pre><!-- react-text: 786 -->
<!-- /react-text --><p data-reactid="787"><em data-reactid="788"><!-- react-text: 789 -->Note: The context (<!-- /react-text --><code data-reactid="790"><!-- react-text: 791 -->this<!-- /react-text --></code><!-- react-text: 792 -->) of a document method is always the document instance itself.<!-- /react-text --></em></p><!-- react-text: 793 -->
<!-- /react-text --><p data-reactid="794"><!-- react-text: 795 -->How we might use it:<!-- /react-text --></p><!-- react-text: 796 -->
<!-- /react-text --><pre data-reactid="797"><code class="language-javascript hljs" data-reactid="798"><span class="hljs-keyword" data-reactid="799"><!-- react-text: 800 -->let<!-- /react-text --></span><!-- react-text: 801 --> user = <!-- /react-text --><span class="hljs-keyword" data-reactid="802"><!-- react-text: 803 -->yield<!-- /react-text --></span><!-- react-text: 804 --> App.models.User.get(<!-- /react-text --><span class="hljs-string" data-reactid="805"><!-- react-text: 806 -->&#x27;user id&#x27;<!-- /react-text --></span><!-- react-text: 807 -->);

<!-- /react-text --><span class="hljs-keyword" data-reactid="808"><!-- react-text: 809 -->if<!-- /react-text --></span><!-- react-text: 810 --> (user.checkPassword(inputPassword)) {
  <!-- /react-text --><span class="hljs-comment" data-reactid="811"><!-- react-text: 812 -->// password correct!<!-- /react-text --></span><!-- react-text: 813 -->
} <!-- /react-text --><span class="hljs-keyword" data-reactid="814"><!-- react-text: 815 -->else<!-- /react-text --></span><!-- react-text: 816 --> {
  <!-- /react-text --><span class="hljs-comment" data-reactid="817"><!-- react-text: 818 -->// password incorrect!<!-- /react-text --></span><!-- react-text: 819 -->
}
<!-- /react-text --></code></pre><!-- react-text: 820 -->
<!-- /react-text --><p data-reactid="821"><em data-reactid="822"><!-- react-text: 823 -->Note: Read the <!-- /react-text --><a href="https://hiddentao.github.io/thinodium" data-reactid="824"><!-- react-text: 825 -->Thinodium docs<!-- /react-text --></a><!-- react-text: 826 --> for the list of built-in Document instance methods.<!-- /react-text --></em></p><!-- react-text: 827 -->
<!-- /react-text --><p data-reactid="828"><strong data-reactid="829"><!-- react-text: 830 -->Virtual fields<!-- /react-text --></strong></p><!-- react-text: 831 -->
<!-- /react-text --><p data-reactid="832"><!-- react-text: 833 -->Virtual fields are document instance fields which appear to work like normal fields, except that they are actually represented by getter and setter functions, and consequently are not part of the model’s schema and are not stored in the database.<!-- /react-text --></p><!-- react-text: 834 -->
<!-- /react-text --><p data-reactid="835"><!-- react-text: 836 -->Virtual fields act as convenient accessors for information derived from the real document data. For example, let’s say we store a user’s birth date. We may add an <!-- /react-text --><code data-reactid="837"><!-- react-text: 838 -->age<!-- /react-text --></code><!-- react-text: 839 --> virtual field which automatically calculates their current age:<!-- /react-text --></p><!-- react-text: 840 -->
<!-- /react-text --><pre data-reactid="841"><code class="language-javascript hljs" data-reactid="842"><span class="hljs-comment" data-reactid="843"><!-- react-text: 844 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 845 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="846"><!-- react-text: 847 -->const<!-- /react-text --></span><!-- react-text: 848 --> moment = <!-- /react-text --><span class="hljs-built_in" data-reactid="849"><!-- react-text: 850 -->require<!-- /react-text --></span><!-- react-text: 851 -->(<!-- /react-text --><span class="hljs-string" data-reactid="852"><!-- react-text: 853 -->&#x27;moment&#x27;<!-- /react-text --></span><!-- react-text: 854 -->),
  waigo = <!-- /react-text --><span class="hljs-built_in" data-reactid="855"><!-- react-text: 856 -->require<!-- /react-text --></span><!-- react-text: 857 -->(<!-- /react-text --><span class="hljs-string" data-reactid="858"><!-- react-text: 859 -->&#x27;waigo&#x27;<!-- /react-text --></span><!-- react-text: 860 -->),
  _ = waigo._;	<!-- /react-text --><span class="hljs-comment" data-reactid="861"><!-- react-text: 862 -->// lodash<!-- /react-text --></span><!-- react-text: 863 -->

exports.schema = {
  username: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="864"><!-- react-text: 865 -->String<!-- /react-text --></span><!-- react-text: 866 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="867"><!-- react-text: 868 -->true<!-- /react-text --></span><!-- react-text: 869 -->,
  },
  dob: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="870"><!-- react-text: 871 -->Date<!-- /react-text --></span><!-- react-text: 872 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="873"><!-- react-text: 874 -->true<!-- /react-text --></span><!-- react-text: 875 -->,
  },
};

exports.docVirtuals = {
  age: {
    get: <!-- /react-text --><span class="hljs-function" data-reactid="876"><span class="hljs-keyword" data-reactid="877"><!-- react-text: 878 -->function<!-- /react-text --></span><!-- react-text: 879 -->(<!-- /react-text --><span class="hljs-params" data-reactid="880"></span><!-- react-text: 881 -->) <!-- /react-text --></span><!-- react-text: 882 -->{
      <!-- /react-text --><span class="hljs-keyword" data-reactid="883"><!-- react-text: 884 -->return<!-- /react-text --></span><!-- react-text: 885 --> moment().diff(<!-- /react-text --><span class="hljs-keyword" data-reactid="886"><!-- react-text: 887 -->this<!-- /react-text --></span><!-- react-text: 888 -->.dob, <!-- /react-text --><span class="hljs-string" data-reactid="889"><!-- react-text: 890 -->&#x27;years&#x27;<!-- /react-text --></span><!-- react-text: 891 -->);
    }
  }
};
<!-- /react-text --></code></pre><!-- react-text: 892 -->
<!-- /react-text --><p data-reactid="893"><!-- react-text: 894 -->And here is how you would use it:<!-- /react-text --></p><!-- react-text: 895 -->
<!-- /react-text --><pre data-reactid="896"><code class="language-javascript hljs" data-reactid="897"><span class="hljs-keyword" data-reactid="898"><!-- react-text: 899 -->let<!-- /react-text --></span><!-- react-text: 900 --> user = <!-- /react-text --><span class="hljs-keyword" data-reactid="901"><!-- react-text: 902 -->yield<!-- /react-text --></span><!-- react-text: 903 --> App.models.User.insert({
  username: <!-- /react-text --><span class="hljs-string" data-reactid="904"><!-- react-text: 905 -->&#x27;test&#x27;<!-- /react-text --></span><!-- react-text: 906 -->,
  dob: moment(<!-- /react-text --><span class="hljs-string" data-reactid="907"><!-- react-text: 908 -->&#x27;1982-02-02&#x27;<!-- /react-text --></span><!-- react-text: 909 -->, <!-- /react-text --><span class="hljs-string" data-reactid="910"><!-- react-text: 911 -->&#x27;YYYY-MM-DD&#x27;<!-- /react-text --></span><!-- react-text: 912 -->).toDate(),
});

<!-- /react-text --><span class="hljs-built_in" data-reactid="913"><!-- react-text: 914 -->console<!-- /react-text --></span><!-- react-text: 915 -->.log( user.age );
<!-- /react-text --><span class="hljs-comment" data-reactid="916"><!-- react-text: 917 -->/* 34 */<!-- /react-text --></span><!-- react-text: 918 -->

<!-- /react-text --><span class="hljs-comment" data-reactid="919"><!-- react-text: 920 -->// let&#x27;s try setting the field<!-- /react-text --></span><!-- react-text: 921 -->
user.age = <!-- /react-text --><span class="hljs-number" data-reactid="922"><!-- react-text: 923 -->2<!-- /react-text --></span><!-- react-text: 924 -->; <!-- /react-text --><span class="hljs-comment" data-reactid="925"><!-- react-text: 926 -->/* throws Error */<!-- /react-text --></span><!-- react-text: 927 -->
<!-- /react-text --></code></pre><!-- react-text: 928 -->
<!-- /react-text --><p data-reactid="929"><!-- react-text: 930 -->Notice how we were unable to set <!-- /react-text --><code data-reactid="931"><!-- react-text: 932 -->age<!-- /react-text --></code><!-- react-text: 933 -->. Virtual fields can be set if we add setters to them:<!-- /react-text --></p><!-- react-text: 934 -->
<!-- /react-text --><pre data-reactid="935"><code class="language-javascript hljs" data-reactid="936"><!-- react-text: 937 -->exports.docVirtuals = {
  age: {
    get: <!-- /react-text --><span class="hljs-function" data-reactid="938"><span class="hljs-keyword" data-reactid="939"><!-- react-text: 940 -->function<!-- /react-text --></span><!-- react-text: 941 -->(<!-- /react-text --><span class="hljs-params" data-reactid="942"></span><!-- react-text: 943 -->) <!-- /react-text --></span><!-- react-text: 944 -->{
      <!-- /react-text --><span class="hljs-keyword" data-reactid="945"><!-- react-text: 946 -->return<!-- /react-text --></span><!-- react-text: 947 --> moment().diff(<!-- /react-text --><span class="hljs-keyword" data-reactid="948"><!-- react-text: 949 -->this<!-- /react-text --></span><!-- react-text: 950 -->.dob, <!-- /react-text --><span class="hljs-string" data-reactid="951"><!-- react-text: 952 -->&#x27;years&#x27;<!-- /react-text --></span><!-- react-text: 953 -->);
    },
    set: <!-- /react-text --><span class="hljs-function" data-reactid="954"><span class="hljs-keyword" data-reactid="955"><!-- react-text: 956 -->function<!-- /react-text --></span><!-- react-text: 957 -->(<!-- /react-text --><span class="hljs-params" data-reactid="958"><!-- react-text: 959 -->val<!-- /react-text --></span><!-- react-text: 960 -->) <!-- /react-text --></span><!-- react-text: 961 -->{
      <!-- /react-text --><span class="hljs-comment" data-reactid="962"><!-- react-text: 963 -->// weird thing to do, I know!<!-- /react-text --></span><!-- react-text: 964 -->
      <!-- /react-text --><span class="hljs-keyword" data-reactid="965"><!-- react-text: 966 -->this<!-- /react-text --></span><!-- react-text: 967 -->.dob = moment().subtract(val, <!-- /react-text --><span class="hljs-string" data-reactid="968"><!-- react-text: 969 -->&#x27;years&#x27;<!-- /react-text --></span><!-- react-text: 970 -->).toDate();
    }
  }
};
<!-- /react-text --></code></pre><!-- react-text: 971 -->
<!-- /react-text --><p data-reactid="972"><em data-reactid="973"><!-- react-text: 974 -->Note: The getters and setters of virtual functions must by synchronous non-generator functions.<!-- /react-text --></em></p><!-- react-text: 975 -->
<!-- /react-text --><p data-reactid="976"><!-- react-text: 977 -->When using the above setter keep in mind that we need to explicitly <!-- /react-text --><code data-reactid="978"><!-- react-text: 979 -->save()<!-- /react-text --></code><!-- react-text: 980 --> the document in order for the <!-- /react-text --><code data-reactid="981"><!-- react-text: 982 -->dob<!-- /react-text --></code><!-- react-text: 983 --> field changes to take effect:<!-- /react-text --></p><!-- react-text: 984 -->
<!-- /react-text --><pre data-reactid="985"><code class="language-javascript hljs" data-reactid="986"><span class="hljs-keyword" data-reactid="987"><!-- react-text: 988 -->const<!-- /react-text --></span><!-- react-text: 989 --> oldDob = user.dob;

<!-- /react-text --><span class="hljs-built_in" data-reactid="990"><!-- react-text: 991 -->console<!-- /react-text --></span><!-- react-text: 992 -->.log( user.age );
<!-- /react-text --><span class="hljs-comment" data-reactid="993"><!-- react-text: 994 -->/* 34 */<!-- /react-text --></span><!-- react-text: 995 -->

user.age = <!-- /react-text --><span class="hljs-number" data-reactid="996"><!-- react-text: 997 -->25<!-- /react-text --></span><!-- react-text: 998 -->;

<!-- /react-text --><span class="hljs-keyword" data-reactid="999"><!-- react-text: 1000 -->let<!-- /react-text --></span><!-- react-text: 1001 --> diff = moment(user.dob).diff(oldDob, <!-- /react-text --><span class="hljs-string" data-reactid="1002"><!-- react-text: 1003 -->&#x27;years&#x27;<!-- /react-text --></span><!-- react-text: 1004 -->);

<!-- /react-text --><span class="hljs-built_in" data-reactid="1005"><!-- react-text: 1006 -->console<!-- /react-text --></span><!-- react-text: 1007 -->.log( diff );
<!-- /react-text --><span class="hljs-comment" data-reactid="1008"><!-- react-text: 1009 -->/* 9 */<!-- /react-text --></span><!-- react-text: 1010 -->

<!-- /react-text --><span class="hljs-comment" data-reactid="1011"><!-- react-text: 1012 -->// save it!<!-- /react-text --></span><!-- react-text: 1013 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="1014"><!-- react-text: 1015 -->yield<!-- /react-text --></span><!-- react-text: 1016 --> user.save();
<!-- /react-text --></code></pre><!-- react-text: 1017 -->
<!-- /react-text --></div></div><div class="prev-next" data-reactid="1018"><a class="prev" href="/docs/databaseandmodels/overviewofmodels/" data-reactid="1019"><!-- react-text: 1020 -->« <!-- /react-text --><!-- react-text: 1021 -->Database and Models: Overview of models<!-- /react-text --></a><a class="next" href="/docs/databaseandmodels/builtinmodels/" data-reactid="1022"><!-- react-text: 1023 -->Database and Models: Built-in models<!-- /react-text --><!-- react-text: 1024 --> »<!-- /react-text --></a></div></section></main><footer data-reactid="1025"><p class="tagline quoted" data-reactid="1026">Node.js ES6 framework for reactive, data-driven apps and APIs</p><div class="credits" data-reactid="1027"><!-- react-text: 1028 -->Icons made by <!-- /react-text --><a href="http://www.freepik.com" title="Freepik" data-reactid="1029">Freepik</a><!-- react-text: 1030 --> from <!-- /react-text --><a href="http://www.flaticon.com" title="Flaticon" data-reactid="1031">www.flaticon.com</a><!-- react-text: 1032 --> is licensed by <!-- /react-text --><a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank" data-reactid="1033">CC 3.0 BY</a></div><div class="social" data-reactid="1034"><a title="Github" href="https://github.com/waigo/waigo" data-reactid="1035"><i class="github" data-reactid="1036"></i></a><a title="Twitter" href="https://twitter.com/waigojs" data-reactid="1037"><i class="twitter" data-reactid="1038"></i></a><a title="discuss" href="https://discord.gg/Jf3pGjf" data-reactid="1039"><i class="discuss" data-reactid="1040"></i></a></div></footer></div></div><script src="/bundle.js?t=1473059323354"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-11640584-17', 'auto');
            ga('send', 'pageview');
          </script></body></html>