<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/><link rel="shortcut icon" href="/img/logo.ico"/><link rel="shortcut icon" href="/img/logo.png"/><meta name="msapplication-TileColor" content="#fff"/><meta name="msapplication-TileImage" content="/img/logo.png"/><title>Defining and using models | Waigo.js</title><style>@import url('https://fonts.googleapis.com/css?family=Roboto Mono:300|Open Sans:300,400|Raleway:100,300,500');a,abbr,acronym,address,applet,big,blockquote,body,caption,cite,code,dd,del,dfn,div,dl,dt,em,fieldset,form,h1,h2,h3,h4,h5,h6,html,iframe,img,ins,kbd,label,legend,li,object,ol,p,pre,q,s,samp,small,span,strike,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,tt,ul,var{margin:0;padding:0;border:0;outline:0;font-weight:inherit;font-style:inherit;font-family:inherit;font-size:100%;vertical-align:baseline}body{line-height:1;color:#000;background:#fff}ol,ul{list-style:none}table{border-collapse:separate;border-spacing:0}caption,table,td,th{vertical-align:middle}caption,td,th{text-align:left;font-weight:400}a img{border:none}*{box-sizing:border-box}@font-face{font-family:FontAwesome;src:url("/fonts/fontawesome-webfont.eot?v=4.6.1");src:url("/fonts/fontawesome-webfont.eot?#iefix&v=4.6.1") format('embedded-opentype'),url("/fonts/fontawesome-webfont.woff?v=4.6.1") format('woff'),url("/fonts/fontawesome-webfont.woff2?v=4.6.1") format('woff2'),url("/fonts/fontawesome-webfont.ttf?v=4.6.1") format('truetype'),url("/fonts/fontawesome-webfont.svg?v=4.6.1#fontawesomeregular") format('svg');font-weight:400;font-style:normal}.fa,i{display:inline-block;font-family:FontAwesome;font-style:normal;font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.333333333333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.285714285714286em;text-align:center}.fa-ul{padding-left:0;margin-left:2.142857142857143em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.142857142857143em;width:2.142857142857143em;top:.142857142857143em;text-align:center}.fa-li.fa-lg{left:-1.857142857142857em}.fa-border{padding:.2em .25em .15em;border:.08em solid #eee;border-radius:.1em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left,i.pull-left{margin-right:.3em}.fa.pull-right,i.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:spin 2s infinite linear;animation:spin 2s infinite linear}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0,mirror=1);-webkit-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2,mirror=1);-webkit-transform:scaleY(-1);transform:scaleY(-1)}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.page.docs button.nav.mobile,.page.home section.features-1 ul li .title,.page.home section.next-links>div a,.page.home section.quick-start h2,.page.home section.splash .actions a,.page.home section.splash p.tagline,footer .social a,footer .tagline,h1,h2,h3,header,header button.mobile-toggle{font-family:Raleway,Arial,sans-serif;font-weight:100;letter-spacing:1px}.page.docs button.nav.mobile,.page.home section.features-1 ul li .title,.page.home section.next-links>div a,.page.home section.splash .actions a,header button.mobile-toggle{font-weight:300}.page.docs aside,.page.docs aside li.active>a,.page.home section.features-1 .intro,body{font-family:Open Sans,Arial,sans-serif;font-weight:300}.page.docs aside li.active>a{font-weight:400}.page.docs section.content code,.page.home section.quick-start pre,.page.home section.splash .install{font-family:Roboto Mono,monospace;font-weight:300}mixin standard-box-shadow(){box-shadow:0 7px 26px -1px rgba(0,0,0,.53)}html{font-size:16px}body{background-color:#fff;margin:0;padding:0}a{color:#3498db;text-decoration:none;border-bottom:1px solid #3498db;-webkit-transition:all .2s linear;transition:all .2s linear}a:hover{color:#fff;background-color:#3498db}.page{position:relative;min-height:100vh;width:100%}.page main{background-color:#fff;min-height:calc(100vh - 64px);padding:1em 1.5em 0}@media only screen and (max-width:500px){.page main{padding:1em}}strong{font-weight:bolder}i{display:inline-block;-webkit-transition:all .2s linear;transition:all .2s linear}i.twitter:before{content:"\F099"}i.github:before{content:"\F09B"}i.discuss:before{content:"\F086"}i.menu:before{content:"\F0C9"}i.menu.open{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);transform:rotate(90deg)}i.changelog:before{content:"\F126"}i.arrow.right:before{content:"\F101"}i.arrow.left{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(180deg);transform:rotate(180deg)}i.arrow.left:before{content:"\F101"}.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}header{position:relative;width:100%;height:64px;margin-bottom:1.5em;-webkit-transition:all .3s linear;transition:all .3s linear;background-color:#2c3e50;color:#fff}.page.home .headroom--unfixed header{background-color:#3498db;color:#fff;box-shadow:none}.page.home .headroom--pinned header{background-color:#2c3e50;color:#fff}header .brand{position:absolute;height:64px}header .brand a{text-decoration:none;padding:0 .5em;line-height:64px;font-size:1.5rem}header .brand a,header .brand a:hover{color:inherit;background-color:inherit;border-bottom:none}header .brand a:hover{border-radius:0}header ul.nav{position:absolute;height:64px;right:15px;list-style:none;display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-o-box-orient:horizontal;-webkit-box-lines:single;-moz-box-lines:single;-o-box-lines:single;-ms-flex-flow:row nowrap;flex-flow:row;-webkit-box-pack:center;-o-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-o-box-align:center;-ms-flex-align:center;align-items:center}header ul.nav li{display:inline-block;margin-right:1.3em}@media only screen and (max-width:800px){header ul.nav li{margin-right:1em}}header ul.nav li:last-child{margin-right:0}header ul.nav li a{color:#fff;text-decoration:none;border:1px solid transparent;-webkit-transition:all .2s linear;transition:all .2s linear;padding:0 .5em;border-radius:5px;font-size:1.2em;display:inline-block;height:100%;line-height:48px}header ul.nav li a.active,header ul.nav li a:hover{color:#fff;background-color:transparent;border:1px solid #fff}header ul.nav li.social{margin-right:.3em}header ul.nav li.social a{font-size:1em}@media only screen and (max-width:500px){header ul.nav{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);z-index:10;pointer-events:none;-webkit-transition:opacity .3s linear;transition:opacity .3s linear;display:block;top:48px;height:auto;border-radius:10px;border:1px solid #2980b9;background-color:#2980b9}header ul.nav li{display:block;background-color:transparent;margin:0;border-bottom:1px solid #3498db}header ul.nav li.social{margin:0}header ul.nav li:last-child{border-bottom:none}header ul.nav li a{color:#fff;text-decoration:none;border:1px solid transparent;-webkit-transition:all .2s linear;transition:all .2s linear;padding:0 .5em;border-radius:5px;font-size:1em;display:block;border-radius:0;text-align:center;font-weight:bolder}header ul.nav li a.active,header ul.nav li a:hover{color:#2980b9;background-color:#fff;border:1px solid transparent}header ul.nav.active{opacity:1;-ms-filter:none;filter:none;pointer-events:auto}}header button.mobile-toggle{border-radius:10px;border:1px solid #fff;padding:.7em 1em;-webkit-transition:all .2s linear;transition:all .2s linear;color:#fff;background-color:transparent;display:none;position:absolute;right:15px;top:16px;width:32px;height:32px;padding:0;cursor:pointer}header button.mobile-toggle:hover{border-radius:10px;border:1px solid #fff;color:#3498db;background-color:#fff}header button.mobile-toggle i{display:block}@media only screen and (max-width:500px){header button.mobile-toggle{display:block}}footer{width:100%;height:50px;border-top:1px solid #ccc;padding:1em;margin-top:60px;color:#666;text-align:center}footer .tagline{margin:0 0 1em}footer .credits{font-size:50%}footer .social{margin-top:1em}footer .social a{text-decoration:none;display:inline-block;margin:0 .2em;width:24px;height:24px;opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);-webkit-transition:all .3s linear;transition:all .3s linear}footer .social a,footer .social a:hover{color:inherit;background-color:inherit;border-bottom:none}footer .social a:hover{border-radius:0;opacity:1;-ms-filter:none;filter:none}.page.home{position:relative}.page.home .headroom-wrapper{background-color:#3498db}@media only screen and (max-width:500px){.page.home .headroom-wrapper{height:64px!important}}.page.home main{padding:0;margin-top:-1px}.page.home section.splash{height:calc(100vh - 64px);background-color:#3498db;display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:vertical;-moz-box-orient:vertical;-o-box-orient:vertical;-webkit-box-lines:single;-moz-box-lines:single;-o-box-lines:single;-ms-flex-flow:column nowrap;flex-flow:column;-webkit-box-pack:center;-o-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-o-box-align:center;-ms-flex-align:center;align-items:center;color:#fff;font-size:1.7rem;text-align:center}@media only screen and (max-width:500px){.page.home section.splash{font-size:1.3rem}}.page.home section.splash .logo{display:block;-webkit-transition:all .3s linear;transition:all .3s linear;width:144px;height:144px;margin:0 0 .5em;background-image:url("/img/logo.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.splash .logo{background-image:url("/img/logo@2x.png");background-size:contain}}@media only screen and (max-width:500px){.page.home section.splash .logo{width:96px;height:96px}}.page.home section.splash p.tagline{margin:.7em 0;font-size:120%;line-height:1.2em;width:50%}@media only screen and (max-width:800px){.page.home section.splash p.tagline{width:80%;margin-bottom:0}}.page.home section.splash .actions{margin:1em 0 2em}@media only screen and (max-width:500px){.page.home section.splash .actions{margin-bottom:1em}}.page.home section.splash .actions a{border-radius:10px;border:1px solid #fff;padding:.7em 1em;-webkit-transition:all .2s linear;transition:all .2s linear;color:#fff;background-color:transparent;cursor:pointer;font-size:80%;margin:0 .5em}.page.home section.splash .actions a:hover{border-radius:10px;border:1px solid #fff;color:#3498db;background-color:#fff}@media only screen and (max-width:500px){.page.home section.splash .actions a{display:block;margin:.5em auto;font-size:100%}}.page.home section.splash .install{font-size:60%;padding:.3em .4em;background-color:#2c3e50;border-radius:5px}.page.home section.splash .meta{margin-top:1.2em}.page.home section.splash .meta a{text-decoration:none;border:1px solid transparent;-webkit-transition:all .2s linear;transition:all .2s linear;padding:0 .5em;border-radius:5px;font-size:50%;color:#fff;margin:0 .5em}.page.home section.splash .meta a.active,.page.home section.splash .meta a:hover{color:#000;background-color:#fff;border:1px solid transparent}.page.home section.splash .meta a i+span{margin-left:.3em}.page.home section.features-1{padding:1em}.page.home section.features-1 .intro{width:80%;font-size:2.2rem;text-align:center;margin:1em auto 1.5em;line-height:1.5em}@media only screen and (max-width:500px){.page.home section.features-1 .intro{font-size:1.8rem}}.page.home section.features-1 ul{display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-o-box-orient:horizontal;-webkit-box-lines:multiple;-moz-box-lines:multiple;-o-box-lines:multiple;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:justify;-o-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:start;-o-box-align:start;-ms-flex-align:start;align-items:flex-start;margin:0 auto;width:90%}@media only screen and (max-width:800px){.page.home section.features-1 ul{width:100%}}@media only screen and (max-width:500px){.page.home section.features-1 ul{-webkit-box-orient:vertical;-moz-box-orient:vertical;-o-box-orient:vertical;-webkit-box-lines:single;-moz-box-lines:single;-o-box-lines:single;-ms-flex-flow:column nowrap;flex-flow:column}}.page.home section.features-1 ul li{display:block;width:30%;font-size:1rem;margin:1.5em auto}@media only screen and (max-width:800px){.page.home section.features-1 ul li{width:40%}}@media only screen and (max-width:500px){.page.home section.features-1 ul li{display:block;width:100%}}.page.home section.features-1 ul li .title{display:inline-block;font-size:140%}.page.home section.features-1 ul li .title:before{display:inline-block;vertical-align:top;margin:0 .5em .3em 0;content:" ";width:32px;height:32px}.page.home section.features-1 ul li .description{margin-top:1em;line-height:1.4em}.page.home section.features-1 ul li:nth-child(1) .title:before{background-image:url("/img/icon-rocket.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(1) .title:before{background-image:url("/img/icon-rocket@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(2) .title:before{background-image:url("/img/icon-plugin.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(2) .title:before{background-image:url("/img/icon-plugin@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(3) .title:before{background-image:url("/img/icon-text-field.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(3) .title:before{background-image:url("/img/icon-text-field@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(4) .title:before{background-image:url("/img/icon-routing.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(4) .title:before{background-image:url("/img/icon-routing@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(5) .title:before{background-image:url("/img/icon-template.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(5) .title:before{background-image:url("/img/icon-template@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(6) .title:before{background-image:url("/img/icon-users.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(6) .title:before{background-image:url("/img/icon-users@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(7) .title:before{background-image:url("/img/icon-email.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(7) .title:before{background-image:url("/img/icon-email@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(8) .title:before{background-image:url("/img/icon-cron.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(8) .title:before{background-image:url("/img/icon-cron@2x.png");background-size:contain}}.page.home section.features-1 ul li:nth-child(9) .title:before{background-image:url("/img/icon-setup.png");background-size:contain;background-repeat:no-repeat;background-position:50%}@media (min--moz-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:138dpi),all and (-webkit-min-device-pixel-ratio:1.5){.page.home section.features-1 ul li:nth-child(9) .title:before{background-image:url("/img/icon-setup@2x.png");background-size:contain}}.page.home section.quick-start{margin:2em 0;background-color:#2c3e50;padding:3em 1em;color:#fff;text-align:center;font-size:1rem}@media only screen and (max-width:500px){.page.home section.quick-start{padding:1em;font-size:.8rem}}.page.home section.quick-start .wrapper{display:inline-block;width:80%;text-align:left}@media only screen and (max-width:500px){.page.home section.quick-start .wrapper{width:100%}}.page.home section.quick-start h2{display:block;font-size:200%;margin-bottom:.8em}.page.home section.quick-start div,.page.home section.quick-start pre{display:inline-block}.page.home section.quick-start pre{line-height:1.5em;background-color:#000;width:40%;padding:1em;margin-right:2em}.page.home section.quick-start div{vertical-align:top;width:50%;font-size:110%;line-height:1.3em}.page.home section.quick-start div p{margin-bottom:1em}@media only screen and (max-width:800px){.page.home section.quick-start pre{display:block;width:100%}.page.home section.quick-start div{display:block;margin-top:1.5em;line-height:1.5em;width:100%}}.page.home section.next-links{margin-top:2em;display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-o-box-orient:horizontal;-webkit-box-lines:multiple;-moz-box-lines:multiple;-o-box-lines:multiple;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:center;-o-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-o-box-align:center;-ms-flex-align:center;align-items:center;font-size:1rem}.page.home section.next-links>div{margin:2em 0;text-align:center}@media only screen and (max-width:500px){.page.home section.next-links>div{margin:1em 0}}.page.home section.next-links>div a{border-radius:10px;border:1px solid #3498db;padding:.7em 1em;-webkit-transition:all .2s linear;transition:all .2s linear;color:#3498db;background-color:transparent;cursor:pointer;display:inline-block;margin:0 .5em;font-size:140%}.page.home section.next-links>div a:hover{border-radius:10px;border:1px solid #3498db;color:#fff;background-color:#3498db}.page.home section.next-links>div p{width:70%;margin:1em auto 0;line-height:1.2em}.page.docs section.content code[class*=hljs],.page.docs section.content img{max-width:100%;box-shadow:0 0 11px 0 rgba(0,0,0,.5)}.page.docs{position:relative}.page.docs main{padding-top:2em}.page.docs section.content{display:inline-block;vertical-align:top;width:79%;padding-left:20px;font-size:1rem;line-height:1.5em;word-wrap:break-word}@media only screen and (max-width:500px){.page.docs section.content{width:100%;padding:0 1em}}.page.docs section.content h1{font-size:250%;margin:0 0 1em;line-height:1em}.page.docs section.content h2{font-size:160%;margin:1.5em 0 1em;line-height:1em}.page.docs section.content h3{font-size:130%;margin:1.5em 0 1em;line-height:1em}.page.docs section.content p{margin:1em 0}.page.docs section.content ol{list-style:decimal}.page.docs section.content ul{list-style:disc}.page.docs section.content ol,.page.docs section.content ul{margin:1em 0 1em 3em}.page.docs section.content ol li,.page.docs section.content ul li{padding:.2em 0}.page.docs section.content code[class*=hljs]{display:block;border-radius:5px;word-wrap:normal;margin-bottom:1.7em}.page.docs section.content code:not([class*=hljs]){display:inline;font-size:110%;padding:.1em .2em;background-color:#ecf0f1;border-radius:5px}.page.docs section.content .prev-next{display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-o-box-orient:horizontal;-webkit-box-lines:multiple;-moz-box-lines:multiple;-o-box-lines:multiple;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:justify;-o-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-o-box-align:center;-ms-flex-align:center;align-items:center;margin-top:4em;font-size:75%;width:100%}.page.docs aside{display:inline-block;vertical-align:top;padding:0 20px 0 0;border-right:1px solid #ecf0f1;font-size:1rem;width:20%;overflow:hidden}.page.docs aside a{border-bottom:none}.page.docs aside a:hover,.page.docs aside li.active>a{border-bottom:1px dashed #000}.page.docs aside li.active>a{font-size:140%;color:#000}.page.docs aside li.active>a:hover{color:#fff}.page.docs aside>ul>li{line-height:2em}.page.docs aside>ul>li>ul{display:none}.page.docs aside>ul>li.active>ul{color:#000;display:block;font-size:80%;margin:.7em 0 0 2em}.page.docs aside>ul>li.active>ul>li{line-height:1.8em}@media only screen and (max-width:500px){.page.docs aside{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:2;left:-100vw;-webkit-transition:all .2s linear;transition:all .2s linear;overflow-y:scroll;background-color:#fff}.page.docs aside ul{margin:1em 0 0 4em}.page.docs aside.mobile.visible{left:0}}.page.docs button.nav.mobile{border-radius:10px;border:1px solid #2980b9;padding:.7em 1em;-webkit-transition:all .2s linear;transition:all .2s linear;color:#fff;background-color:#2980b9;cursor:pointer;display:none;position:fixed;top:64px;left:0;padding:.2em .3em;font-size:1.5rem;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none;z-index:4}.page.docs button.nav.mobile:hover{border-radius:10px;border:1px solid #3498db;color:#fff;background-color:#3498db;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}@media only screen and (max-width:500px){.page.docs button.nav.mobile{display:block}}</style></head><body><div id="react-mount"><div class="page docs" data-reactroot="" data-reactid="1" data-react-checksum="732013657"><div class="headroom-wrapper" data-reactid="2"><div style="position:relative;top:0;left:0;right:0;z-index:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);" class="headroom headroom--unfixed" data-reactid="3"><header data-reactid="4"><section class="brand" data-reactid="5"><a href="/" data-reactid="6">Waigo.js</a></section><button class="mobile-toggle" data-reactid="7"><i class="menu" data-reactid="8"></i></button><ul class="nav" data-reactid="9"><li class="" data-reactid="10"><a title="Get started" class="" href="/docs/gettingstarted/requirements/" data-reactid="11">Get started</a></li><li class="" data-reactid="12"><a title="Documentation" class="active" href="/docs/introduction/motivation/" data-reactid="13">Docs</a></li><li class="social" data-reactid="14"><a title="Twitter" href="https://twitter.com/waigojs" class="" data-reactid="15"><i class="twitter" data-reactid="16"></i></a></li><li class="social" data-reactid="17"><a title="Github" href="https://github.com/waigo/waigo" class="" data-reactid="18"><i class="github" data-reactid="19"></i></a></li><li class="social" data-reactid="20"><a title="Discuss" href="https://discord.gg/Jf3pGjf" class="" data-reactid="21"><i class="discuss" data-reactid="22"></i></a></li></ul></header></div></div><main data-reactid="23"><button class="nav mobile" title="Toggle nav menu" data-reactid="24"><i class="arrow right" data-reactid="25"></i></button><aside class="" data-reactid="26"><ul data-reactid="27"><li class="" data-reactid="28"><a href="/docs/introduction/" data-reactid="29">Introduction</a><ul data-reactid="30"><li class="" data-reactid="31"><a href="/docs/introduction/motivation/" data-reactid="32">Motivation</a></li><li class="" data-reactid="33"><a href="/docs/introduction/middlewareprimer/" data-reactid="34">Middleware primer</a></li><li class="" data-reactid="35"><a href="/docs/introduction/folderstructure/" data-reactid="36">Folder structure</a></li><li class="" data-reactid="37"><a href="/docs/introduction/codingstandard/" data-reactid="38">Coding standard</a></li></ul></li><li class="" data-reactid="39"><a href="/docs/gettingstarted/" data-reactid="40">Getting Started</a><ul data-reactid="41"><li class="" data-reactid="42"><a href="/docs/gettingstarted/requirements/" data-reactid="43">Requirements</a></li><li class="" data-reactid="44"><a href="/docs/gettingstarted/installation/" data-reactid="45">Installation</a></li><li class="" data-reactid="46"><a href="/docs/gettingstarted/runninghelloworld/" data-reactid="47">Running &quot;Hello World&quot;</a></li><li class="" data-reactid="48"><a href="/docs/gettingstarted/buildworkflowlivereload/" data-reactid="49">Build workflow and Live reload</a></li></ul></li><li class="" data-reactid="50"><a href="/docs/extendandoverride/" data-reactid="51">Extend and Override</a><ul data-reactid="52"><li class="" data-reactid="53"><a href="/docs/extendandoverride/moduleloader/" data-reactid="54">Module Loader</a></li><li class="" data-reactid="55"><a href="/docs/extendandoverride/usingplugins/" data-reactid="56">Using Plugins</a></li><li class="" data-reactid="57"><a href="/docs/extendandoverride/creatingplugins/" data-reactid="58">Creating Plugins</a></li></ul></li><li class="" data-reactid="59"><a href="/docs/commandline/" data-reactid="60">Command-Line (CLI)</a><ul data-reactid="61"><li class="" data-reactid="62"><a href="/docs/commandline/usingthecli/" data-reactid="63">Using the CLI</a></li><li class="" data-reactid="64"><a href="/docs/commandline/creatingcustomcommands/" data-reactid="65">Creating custom commands</a></li></ul></li><li class="" data-reactid="66"><a href="/docs/appconfiguration/" data-reactid="67">App configuration</a><ul data-reactid="68"><li class="" data-reactid="69"><a href="/docs/appconfiguration/appobject/" data-reactid="70">App object</a></li><li class="" data-reactid="71"><a href="/docs/appconfiguration/configuration/" data-reactid="72">Configuration</a></li><li class="" data-reactid="73"><a href="/docs/appconfiguration/startupsteps/" data-reactid="74">Startup steps</a></li><li class="" data-reactid="75"><a href="/docs/appconfiguration/shutdownsteps/" data-reactid="76">Shutdown steps</a></li></ul></li><li class="" data-reactid="77"><a href="/docs/logging/" data-reactid="78">Logging</a><ul data-reactid="79"><li class="" data-reactid="80"><a href="/docs/logging/howtouse/" data-reactid="81">How to use</a></li><li class="" data-reactid="82"><a href="/docs/logging/subcategories/" data-reactid="83">Sub-categories</a></li></ul></li><li class="" data-reactid="84"><a href="/docs/events/" data-reactid="85">Events</a></li><li class="" data-reactid="86"><a href="/docs/errorhandling/" data-reactid="87">Error handling</a><ul data-reactid="88"><li class="" data-reactid="89"><a href="/docs/errorhandling/builtinerrorclasses/" data-reactid="90">Built-in Error classes</a></li><li class="" data-reactid="91"><a href="/docs/errorhandling/creatingyourown/" data-reactid="92">Creating your own</a></li><li class="" data-reactid="93"><a href="/docs/errorhandling/errormiddleware/" data-reactid="94">Error middleware</a></li></ul></li><li class="" data-reactid="95"><a href="/docs/middleware/" data-reactid="96">Middleware</a><ul data-reactid="97"><li class="" data-reactid="98"><a href="/docs/middleware/defining/" data-reactid="99">Defining</a></li><li class="" data-reactid="100"><a href="/docs/middleware/configuring/" data-reactid="101">Configuring</a></li><li class="" data-reactid="102"><a href="/docs/middleware/commonmiddleware/" data-reactid="103">Common middleware</a></li></ul></li><li class="" data-reactid="104"><a href="/docs/controllers/" data-reactid="105">Controllers</a></li><li class="active" data-reactid="106"><a href="/docs/databaseandmodels/" data-reactid="107">Database and Models</a><ul data-reactid="108"><li class="" data-reactid="109"><a href="/docs/databaseandmodels/databaseconnections/" data-reactid="110">Database connections</a></li><li class="" data-reactid="111"><a href="/docs/databaseandmodels/overviewofmodels/" data-reactid="112">Overview of models</a></li><li class="active" data-reactid="113"><a href="/docs/databaseandmodels/definingandusingmodels/" data-reactid="114">Defining and using models</a></li><li class="" data-reactid="115"><a href="/docs/databaseandmodels/builtinmodels/" data-reactid="116">Built-in models</a></li><li class="" data-reactid="117"><a href="/docs/databaseandmodels/reactiveupdates/" data-reactid="118">Reactive updates</a></li></ul></li><li class="" data-reactid="119"><a href="/docs/scaling/" data-reactid="120">Scaling</a><ul data-reactid="121"><li class="" data-reactid="122"><a href="/docs/scaling/multiprocessclustering/" data-reactid="123">Multi-process clustering</a></li></ul></li><li class="" data-reactid="124"><a href="/docs/routing/" data-reactid="125">Routing</a><ul data-reactid="126"><li class="" data-reactid="127"><a href="/docs/routing/howtouse/" data-reactid="128">How to use</a></li><li class="" data-reactid="129"><a href="/docs/routing/generatingurls/" data-reactid="130">Generating URLs</a></li></ul></li><li class="" data-reactid="131"><a href="/docs/sessions/" data-reactid="132">Sessions</a></li><li class="" data-reactid="133"><a href="/docs/bestpractices/" data-reactid="134">Best practices</a></li></ul></aside><section class="content" data-reactid="135"><div data-reactid="136"><div data-reactid="137"><h1 data-reactid="138"><!-- react-text: 139 -->Defining and using models<!-- /react-text --></h1><!-- react-text: 140 -->
<!-- /react-text --><p data-reactid="141"><!-- react-text: 142 -->A model is defined as file under the <!-- /react-text --><code data-reactid="143"><!-- react-text: 144 -->src/models<!-- /react-text --></code><!-- react-text: 145 --> path. It must export a table schema definition and may optionally export definitions for virtual fields, model methods and document instance methods.<!-- /react-text --></p><!-- react-text: 146 -->
<!-- /react-text --><h2 data-reactid="147"><!-- react-text: 148 -->Schema<!-- /react-text --></h2><!-- react-text: 149 -->
<!-- /react-text --><p data-reactid="150"><!-- react-text: 151 -->At a bare minimum our model must export a <!-- /react-text --><code data-reactid="152"><!-- react-text: 153 -->schema<!-- /react-text --></code><!-- react-text: 154 -->:<!-- /react-text --></p><!-- react-text: 155 -->
<!-- /react-text --><pre data-reactid="156"><code class="language-javascript hljs" data-reactid="157"><span class="hljs-comment" data-reactid="158"><!-- react-text: 159 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 160 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="161"><!-- react-text: 162 -->const<!-- /react-text --></span><!-- react-text: 163 --> ProfileSchema = {
  displayName: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="164"><!-- react-text: 165 -->String<!-- /react-text --></span><!-- react-text: 166 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="167"><!-- react-text: 168 -->true<!-- /react-text --></span><!-- react-text: 169 --> 
  },
};

exports.schema = {
  username: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="170"><!-- react-text: 171 -->String<!-- /react-text --></span><!-- react-text: 172 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="173"><!-- react-text: 174 -->true<!-- /react-text --></span><!-- react-text: 175 -->,
  },
  password: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="176"><!-- react-text: 177 -->String<!-- /react-text --></span><!-- react-text: 178 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="179"><!-- react-text: 180 -->true<!-- /react-text --></span><!-- react-text: 181 -->,
  },
  profile: { 
    type: ProfileSchema, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="182"><!-- react-text: 183 -->false<!-- /react-text --></span><!-- react-text: 184 -->,
  },
  lastLogin: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="185"><!-- react-text: 186 -->Date<!-- /react-text --></span><!-- react-text: 187 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="188"><!-- react-text: 189 -->false<!-- /react-text --></span><!-- react-text: 190 -->,
  },
};
<!-- /react-text --></code></pre><!-- react-text: 191 -->
<!-- /react-text --><p data-reactid="192"><em data-reactid="193"><!-- react-text: 194 -->Note: Thinodium uses the <!-- /react-text --><a href="https://github.com/hiddentao/simple-nosql-schema" data-reactid="195"><!-- react-text: 196 -->simple-nosql-schema<!-- /react-text --></a><!-- react-text: 197 --> module to validate schemas. Check it out to find out about the different types and options possible for each field defined in the schema<!-- /react-text --></em><!-- react-text: 198 -->.<!-- /react-text --></p><!-- react-text: 199 -->
<!-- /react-text --><p data-reactid="200"><!-- react-text: 201 -->The above schema specifies four fields for the database table - <!-- /react-text --><code data-reactid="202"><!-- react-text: 203 -->username<!-- /react-text --></code><!-- react-text: 204 -->, <!-- /react-text --><code data-reactid="205"><!-- react-text: 206 -->password<!-- /react-text --></code><!-- react-text: 207 -->, <!-- /react-text --><code data-reactid="208"><!-- react-text: 209 -->profile<!-- /react-text --></code><!-- react-text: 210 --> and <!-- /react-text --><code data-reactid="211"><!-- react-text: 212 -->lastLogin<!-- /react-text --></code><!-- react-text: 213 --> - with the first two fields being mandatory for any new rows that are to be inserted into the table. The <!-- /react-text --><code data-reactid="214"><!-- react-text: 215 -->profile<!-- /react-text --></code><!-- react-text: 216 --> field value is a nested document which must contain atleast a <!-- /react-text --><code data-reactid="217"><!-- react-text: 218 -->displayName<!-- /react-text --></code><!-- react-text: 219 --> key. The <!-- /react-text --><code data-reactid="220"><!-- react-text: 221 -->lastLogin<!-- /react-text --></code><!-- react-text: 222 --> field is of type <!-- /react-text --><code data-reactid="223"><!-- react-text: 224 -->Date<!-- /react-text --></code><!-- react-text: 225 --> meaning that in the database it is stored as a date timestamp.<!-- /react-text --></p><!-- react-text: 226 -->
<!-- /react-text --><p data-reactid="227"><!-- react-text: 228 -->Using this model is simple:<!-- /react-text --></p><!-- react-text: 229 -->
<!-- /react-text --><pre data-reactid="230"><code class="language-javascript hljs" data-reactid="231"><span class="hljs-comment" data-reactid="232"><!-- react-text: 233 -->// file: &lt;project folder&gt;/src/controllers/index.js<!-- /react-text --></span><!-- react-text: 234 -->

exports.add = <!-- /react-text --><span class="hljs-function" data-reactid="235"><span class="hljs-keyword" data-reactid="236"><!-- react-text: 237 -->function<!-- /react-text --></span><!-- react-text: 238 -->*(<!-- /react-text --><span class="hljs-params" data-reactid="239"></span><!-- react-text: 240 -->) <!-- /react-text --></span><!-- react-text: 241 -->{
  <!-- /react-text --><span class="hljs-keyword" data-reactid="242"><!-- react-text: 243 -->let<!-- /react-text --></span><!-- react-text: 244 --> user = <!-- /react-text --><span class="hljs-keyword" data-reactid="245"><!-- react-text: 246 -->yield<!-- /react-text --></span><!-- react-text: 247 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="248"><!-- react-text: 249 -->this<!-- /react-text --></span><!-- react-text: 250 -->.App.models.User.insert({
  	username: <!-- /react-text --><span class="hljs-string" data-reactid="251"><!-- react-text: 252 -->&#x27;test@test.com&#x27;<!-- /react-text --></span><!-- react-text: 253 -->,
  	password: <!-- /react-text --><span class="hljs-string" data-reactid="254"><!-- react-text: 255 -->&#x27;password&#x27;<!-- /react-text --></span><!-- react-text: 256 -->,
  	profile: {
	  displayName: <!-- /react-text --><span class="hljs-string" data-reactid="257"><!-- react-text: 258 -->&#x27;test user&#x27;<!-- /react-text --></span><!-- react-text: 259 -->
  	}
  });
  
  <!-- /react-text --><span class="hljs-keyword" data-reactid="260"><!-- react-text: 261 -->this<!-- /react-text --></span><!-- react-text: 262 -->.body = user.username;	<!-- /react-text --><span class="hljs-comment" data-reactid="263"><!-- react-text: 264 -->// test@test.com<!-- /react-text --></span><!-- react-text: 265 -->
}
<!-- /react-text --></code></pre><!-- react-text: 266 -->
<!-- /react-text --><p data-reactid="267"><!-- react-text: 268 -->We can fetch all rows at any time:<!-- /react-text --></p><!-- react-text: 269 -->
<!-- /react-text --><pre data-reactid="270"><code class="language-javascript hljs" data-reactid="271"><span class="hljs-comment" data-reactid="272"><!-- react-text: 273 -->// ...continuing from previous example...<!-- /react-text --></span><!-- react-text: 274 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="275"><!-- react-text: 276 -->let<!-- /react-text --></span><!-- react-text: 277 --> allUsers = <!-- /react-text --><span class="hljs-keyword" data-reactid="278"><!-- react-text: 279 -->yield<!-- /react-text --></span><!-- react-text: 280 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="281"><!-- react-text: 282 -->this<!-- /react-text --></span><!-- react-text: 283 -->.App.models.User.getAll();

<!-- /react-text --><span class="hljs-comment" data-reactid="284"><!-- react-text: 285 -->/* allUsers.length === 1 */<!-- /react-text --></span><!-- react-text: 286 -->

<!-- /react-text --><span class="hljs-built_in" data-reactid="287"><!-- react-text: 288 -->console<!-- /react-text --></span><!-- react-text: 289 -->.log( allUsers[<!-- /react-text --><span class="hljs-number" data-reactid="290"><!-- react-text: 291 -->0<!-- /react-text --></span><!-- react-text: 292 -->].username );	  <!-- /react-text --><span class="hljs-comment" data-reactid="293"><!-- react-text: 294 -->/* test@test.com */<!-- /react-text --></span><!-- react-text: 295 -->
<!-- /react-text --></code></pre><!-- react-text: 296 -->
<!-- /react-text --><p data-reactid="297"><!-- react-text: 298 -->Every database table row has a unique <!-- /react-text --><code data-reactid="299"><!-- react-text: 300 -->id<!-- /react-text --></code><!-- react-text: 301 --> field (the primary key) which is auto-generated by the database engine. This can be used to quickly fetch an item we’ve previously inserted:<!-- /react-text --></p><!-- react-text: 302 -->
<!-- /react-text --><pre data-reactid="303"><code class="language-javascript hljs" data-reactid="304"><span class="hljs-comment" data-reactid="305"><!-- react-text: 306 -->// ...continuing from previous example...<!-- /react-text --></span><!-- react-text: 307 -->

<!-- /react-text --><span class="hljs-comment" data-reactid="308"><!-- react-text: 309 -->// reload user from db<!-- /react-text --></span><!-- react-text: 310 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="311"><!-- react-text: 312 -->let<!-- /react-text --></span><!-- react-text: 313 --> addedUser = <!-- /react-text --><span class="hljs-keyword" data-reactid="314"><!-- react-text: 315 -->yield<!-- /react-text --></span><!-- react-text: 316 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="317"><!-- react-text: 318 -->this<!-- /react-text --></span><!-- react-text: 319 -->.App.models.User.get(user.id);
<!-- /react-text --></code></pre><!-- react-text: 320 -->
<!-- /react-text --><p data-reactid="321"><!-- react-text: 322 -->We can update a user’s attributes:<!-- /react-text --></p><!-- react-text: 323 -->
<!-- /react-text --><pre data-reactid="324"><code class="language-javascript hljs" data-reactid="325"><span class="hljs-comment" data-reactid="326"><!-- react-text: 327 -->// ...continuing from previous example...<!-- /react-text --></span><!-- react-text: 328 -->

<!-- /react-text --><span class="hljs-comment" data-reactid="329"><!-- react-text: 330 -->// update username<!-- /react-text --></span><!-- react-text: 331 -->
user.username = <!-- /react-text --><span class="hljs-string" data-reactid="332"><!-- react-text: 333 -->&#x27;test2@domain.com&#x27;<!-- /react-text --></span><!-- react-text: 334 -->;
<!-- /react-text --><span class="hljs-keyword" data-reactid="335"><!-- react-text: 336 -->yield<!-- /react-text --></span><!-- react-text: 337 --> user.save();
<!-- /react-text --></code></pre><!-- react-text: 338 -->
<!-- /react-text --><p data-reactid="339"><!-- react-text: 340 -->We can also remove the user.<!-- /react-text --></p><!-- react-text: 341 -->
<!-- /react-text --><pre data-reactid="342"><code class="language-javascript hljs" data-reactid="343"><span class="hljs-comment" data-reactid="344"><!-- react-text: 345 -->// ...continuing from previous example...<!-- /react-text --></span><!-- react-text: 346 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="347"><!-- react-text: 348 -->yield<!-- /react-text --></span><!-- react-text: 349 --> user.remove();

<!-- /react-text --><span class="hljs-keyword" data-reactid="350"><!-- react-text: 351 -->let<!-- /react-text --></span><!-- react-text: 352 --> addedUser = <!-- /react-text --><span class="hljs-keyword" data-reactid="353"><!-- react-text: 354 -->yield<!-- /react-text --></span><!-- react-text: 355 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="356"><!-- react-text: 357 -->this<!-- /react-text --></span><!-- react-text: 358 -->.App.models.User.get(user.id);

<!-- /react-text --><span class="hljs-comment" data-reactid="359"><!-- react-text: 360 -->/* addedUser === null */<!-- /react-text --></span><!-- react-text: 361 -->
<!-- /react-text --></code></pre><!-- react-text: 362 -->
<!-- /react-text --><p data-reactid="363"><em data-reactid="364"><!-- react-text: 365 -->Note: Read the <!-- /react-text --><a href="https://hiddentao.github.io/thinodium" data-reactid="366"><!-- react-text: 367 -->Thinodium docs<!-- /react-text --></a><!-- react-text: 368 --> for the full model API.<!-- /react-text --></em></p><!-- react-text: 369 -->
<!-- /react-text --><h2 data-reactid="370"><!-- react-text: 371 -->Indexes<!-- /react-text --></h2><!-- react-text: 372 -->
<!-- /react-text --><p data-reactid="373"><!-- react-text: 374 -->To speed up lookups on heavily-used tables we can and should add <!-- /react-text --><em data-reactid="375"><!-- react-text: 376 -->indexes<!-- /react-text --></em><!-- react-text: 377 -->:<!-- /react-text --></p><!-- react-text: 378 -->
<!-- /react-text --><pre data-reactid="379"><code class="language-javascript hljs" data-reactid="380"><span class="hljs-comment" data-reactid="381"><!-- react-text: 382 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 383 -->

exports.schema = {
  username: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="384"><!-- react-text: 385 -->String<!-- /react-text --></span><!-- react-text: 386 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="387"><!-- react-text: 388 -->true<!-- /react-text --></span><!-- react-text: 389 -->,
  },
  password: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="390"><!-- react-text: 391 -->String<!-- /react-text --></span><!-- react-text: 392 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="393"><!-- react-text: 394 -->true<!-- /react-text --></span><!-- react-text: 395 -->,
  },
  roles: { 
    type: [<!-- /react-text --><span class="hljs-built_in" data-reactid="396"><!-- react-text: 397 -->String<!-- /react-text --></span><!-- react-text: 398 -->], 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="399"><!-- react-text: 400 -->false<!-- /react-text --></span><!-- react-text: 401 -->,
  },  
};

exports.indexes = {
  {
    name: <!-- /react-text --><span class="hljs-string" data-reactid="402"><!-- react-text: 403 -->&#x27;username&#x27;<!-- /react-text --></span><!-- react-text: 404 -->,
  },
  {
    name: <!-- /react-text --><span class="hljs-string" data-reactid="405"><!-- react-text: 406 -->&#x27;roles&#x27;<!-- /react-text --></span><!-- react-text: 407 -->,
    options: {
      multi: <!-- /react-text --><span class="hljs-literal" data-reactid="408"><!-- react-text: 409 -->true<!-- /react-text --></span><!-- react-text: 410 -->,
    },
  },    
};
<!-- /react-text --></code></pre><!-- react-text: 411 -->
<!-- /react-text --><p data-reactid="412"><!-- react-text: 413 -->We’ve asked for two indexes - one on the <!-- /react-text --><code data-reactid="414"><!-- react-text: 415 -->username<!-- /react-text --></code><!-- react-text: 416 --> field and one on the <!-- /react-text --><code data-reactid="417"><!-- react-text: 418 -->roles<!-- /react-text --></code><!-- react-text: 419 --> field with the additonal setting that it should be treated as being able to hold multiple values (because <!-- /react-text --><code data-reactid="420"><!-- react-text: 421 -->roles<!-- /react-text --></code><!-- react-text: 422 --> specifies an array of strings).<!-- /react-text --></p><!-- react-text: 423 -->
<!-- /react-text --><p data-reactid="424"><!-- react-text: 425 -->From now on lookup by username and/or role will be quicker than before.<!-- /react-text --></p><!-- react-text: 426 -->
<!-- /react-text --><p data-reactid="427"><em data-reactid="428"><!-- react-text: 429 -->Note: More complex compound indexes are supported - check out Waigo’s built-in models for real examples.<!-- /react-text --></em></p><!-- react-text: 430 -->
<!-- /react-text --><h2 data-reactid="431"><!-- react-text: 432 -->Primary key<!-- /react-text --></h2><!-- react-text: 433 -->
<!-- /react-text --><p data-reactid="434"><!-- react-text: 435 -->By default the <!-- /react-text --><code data-reactid="436"><!-- react-text: 437 -->id<!-- /react-text --></code><!-- react-text: 438 --> field (which is auto-defined by the database engine) is assumed to the primary key. But you can override this setting using the <!-- /react-text --><code data-reactid="439"><!-- react-text: 440 -->pk<!-- /react-text --></code><!-- react-text: 441 --> export:<!-- /react-text --></p><!-- react-text: 442 -->
<!-- /react-text --><pre data-reactid="443"><code class="language-javascript hljs" data-reactid="444"><span class="hljs-comment" data-reactid="445"><!-- react-text: 446 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 447 -->

exports.pk = <!-- /react-text --><span class="hljs-string" data-reactid="448"><!-- react-text: 449 -->&#x27;username&#x27;<!-- /react-text --></span><!-- react-text: 450 -->;
<!-- /react-text --></code></pre><!-- react-text: 451 -->
<!-- /react-text --><h2 data-reactid="452"><!-- react-text: 453 -->Model methods<!-- /react-text --></h2><!-- react-text: 454 -->
<!-- /react-text --><p data-reactid="455"><!-- react-text: 456 -->Model methods are the methods available on the model object itself. There are a number of built-in methods - <!-- /react-text --><code data-reactid="457"><!-- react-text: 458 -->get()<!-- /react-text --></code><!-- react-text: 459 -->, <!-- /react-text --><code data-reactid="460"><!-- react-text: 461 -->insert()<!-- /react-text --></code><!-- react-text: 462 -->, etc - provided by Waigo. But it is a good idea to add custom methods as a convenience and in order to control access.<!-- /react-text --></p><!-- react-text: 463 -->
<!-- /react-text --><p data-reactid="464"><!-- react-text: 465 -->For example, let’s say we wish to hash a new user’s password before inserting it. We will provide an <!-- /react-text --><code data-reactid="466"><!-- react-text: 467 -->add()<!-- /react-text --></code><!-- react-text: 468 --> method to add a user, and a <!-- /react-text --><code data-reactid="469"><!-- react-text: 470 -->load()<!-- /react-text --></code><!-- react-text: 471 --> method to fetch a user given username and password:<!-- /react-text --></p><!-- react-text: 472 -->
<!-- /react-text --><pre data-reactid="473"><code class="language-javascript hljs" data-reactid="474"><span class="hljs-comment" data-reactid="475"><!-- react-text: 476 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 477 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="478"><!-- react-text: 479 -->const<!-- /react-text --></span><!-- react-text: 480 --> waigo = <!-- /react-text --><span class="hljs-built_in" data-reactid="481"><!-- react-text: 482 -->require<!-- /react-text --></span><!-- react-text: 483 -->(<!-- /react-text --><span class="hljs-string" data-reactid="484"><!-- react-text: 485 -->&#x27;waigo&#x27;<!-- /react-text --></span><!-- react-text: 486 -->),
	_ = waigo._;	<!-- /react-text --><span class="hljs-comment" data-reactid="487"><!-- react-text: 488 -->// lodash<!-- /react-text --></span><!-- react-text: 489 -->

exports.schema = {
  username: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="490"><!-- react-text: 491 -->String<!-- /react-text --></span><!-- react-text: 492 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="493"><!-- react-text: 494 -->true<!-- /react-text --></span><!-- react-text: 495 -->,
  },
  password: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="496"><!-- react-text: 497 -->String<!-- /react-text --></span><!-- react-text: 498 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="499"><!-- react-text: 500 -->true<!-- /react-text --></span><!-- react-text: 501 -->,
  },
};

exports.modelMethods = {
  add: <!-- /react-text --><span class="hljs-function" data-reactid="502"><span class="hljs-keyword" data-reactid="503"><!-- react-text: 504 -->function<!-- /react-text --></span><!-- react-text: 505 -->*(<!-- /react-text --><span class="hljs-params" data-reactid="506"><!-- react-text: 507 -->username, password<!-- /react-text --></span><!-- react-text: 508 -->) <!-- /react-text --></span><!-- react-text: 509 -->{
    <!-- /react-text --><span class="hljs-keyword" data-reactid="510"><!-- react-text: 511 -->this<!-- /react-text --></span><!-- react-text: 512 -->._logger.info(<!-- /react-text --><span class="hljs-string" data-reactid="513"><!-- react-text: 514 -->`Adding user: <!-- /react-text --><span class="hljs-subst" data-reactid="515"><!-- react-text: 516 -->${username}<!-- /react-text --></span><!-- react-text: 517 -->`<!-- /react-text --></span><!-- react-text: 518 -->);
    
    <!-- /react-text --><span class="hljs-keyword" data-reactid="519"><!-- react-text: 520 -->return<!-- /react-text --></span><!-- react-text: 521 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="522"><!-- react-text: 523 -->this<!-- /react-text --></span><!-- react-text: 524 -->.insert({
      username: username,
      password: someHashingFunction(password),
    });
  },
  
  load: <!-- /react-text --><span class="hljs-function" data-reactid="525"><span class="hljs-keyword" data-reactid="526"><!-- react-text: 527 -->function<!-- /react-text --></span><!-- react-text: 528 -->*(<!-- /react-text --><span class="hljs-params" data-reactid="529"><!-- react-text: 530 -->username, password<!-- /react-text --></span><!-- react-text: 531 -->) <!-- /react-text --></span><!-- react-text: 532 -->{
    <!-- /react-text --><span class="hljs-keyword" data-reactid="533"><!-- react-text: 534 -->this<!-- /react-text --></span><!-- react-text: 535 -->._logger.info(<!-- /react-text --><span class="hljs-string" data-reactid="536"><!-- react-text: 537 -->`Loading user: <!-- /react-text --><span class="hljs-subst" data-reactid="538"><!-- react-text: 539 -->${username}<!-- /react-text --></span><!-- react-text: 540 -->`<!-- /react-text --></span><!-- react-text: 541 -->);
    
    password = someHashingFunction(password);
    
    <!-- /react-text --><span class="hljs-keyword" data-reactid="542"><!-- react-text: 543 -->let<!-- /react-text --></span><!-- react-text: 544 --> ret = <!-- /react-text --><span class="hljs-keyword" data-reactid="545"><!-- react-text: 546 -->yield<!-- /react-text --></span><!-- react-text: 547 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="548"><!-- react-text: 549 -->this<!-- /react-text --></span><!-- react-text: 550 -->.rawQry().filter(<!-- /react-text --><span class="hljs-function" data-reactid="551"><span class="hljs-keyword" data-reactid="552"><!-- react-text: 553 -->function<!-- /react-text --></span><!-- react-text: 554 -->(<!-- /react-text --><span class="hljs-params" data-reactid="555"><!-- react-text: 556 -->user<!-- /react-text --></span><!-- react-text: 557 -->) <!-- /react-text --></span><!-- react-text: 558 -->{
      <!-- /react-text --><span class="hljs-keyword" data-reactid="559"><!-- react-text: 560 -->return<!-- /react-text --></span><!-- react-text: 561 --> user(<!-- /react-text --><span class="hljs-string" data-reactid="562"><!-- react-text: 563 -->&#x27;password&#x27;<!-- /react-text --></span><!-- react-text: 564 -->).eq(password).and(user(<!-- /react-text --><span class="hljs-string" data-reactid="565"><!-- react-text: 566 -->&#x27;username&#x27;<!-- /react-text --></span><!-- react-text: 567 -->).eq(username));
    }).run();
    
    <!-- /react-text --><span class="hljs-keyword" data-reactid="568"><!-- react-text: 569 -->this<!-- /react-text --></span><!-- react-text: 570 -->.wrapRaw(_.get(ret, <!-- /react-text --><span class="hljs-string" data-reactid="571"><!-- react-text: 572 -->&#x27;0&#x27;<!-- /react-text --></span><!-- react-text: 573 -->));
  }
};
<!-- /react-text --></code></pre><!-- react-text: 574 -->
<!-- /react-text --><p data-reactid="575"><!-- react-text: 576 -->The <!-- /react-text --><code data-reactid="577"><!-- react-text: 578 -->_logger()<!-- /react-text --></code><!-- react-text: 579 --> method we used inside the model methods gives us access to a <!-- /react-text --><a href="/docs/logging/" data-reactid="580">logger</a><!-- react-text: 581 --> associated with the Model - it is auto-created by Waigo. We can also access the <!-- /react-text --><code data-reactid="582"><!-- react-text: 583 -->App<!-- /react-text --></code><!-- react-text: 584 --> object at any time using the <!-- /react-text --><code data-reactid="585"><!-- react-text: 586 -->_App()<!-- /react-text --></code><!-- react-text: 587 --> method, though in this case we didn’t need to do this.<!-- /react-text --></p><!-- react-text: 588 -->
<!-- /react-text --><p data-reactid="589"><!-- react-text: 590 -->The <!-- /react-text --><code data-reactid="591"><!-- react-text: 592 -->rawQry()<!-- /react-text --></code><!-- react-text: 593 --> method is available on all Waigo models and enables the raw querying mode for our underlying database table. In this case it’s the same as executing a query using <!-- /react-text --><a href="https://github.com/neumino/rethinkdbdash" data-reactid="594"><!-- react-text: 595 -->rethinkdbdash<!-- /react-text --></a><!-- react-text: 596 -->, the RethinkDB database library that is being used at a lower level.<!-- /react-text --></p><!-- react-text: 597 -->
<!-- /react-text --><p data-reactid="598"><!-- react-text: 599 -->The <!-- /react-text --><code data-reactid="600"><!-- react-text: 601 -->wrapRaw()<!-- /react-text --></code><!-- react-text: 602 --> method wraps raw database data (as returned by using <!-- /react-text --><code data-reactid="603"><!-- react-text: 604 -->rawQry()<!-- /react-text --></code><!-- react-text: 605 -->) in our models’ document instances (see <!-- /react-text --><a href="https://hiddentao.github.io/thinodium" data-reactid="606"><!-- react-text: 607 -->Thinodium docs<!-- /react-text --></a><!-- react-text: 608 -->).<!-- /react-text --></p><!-- react-text: 609 -->
<!-- /react-text --><p data-reactid="610"><!-- react-text: 611 -->We would use this model as follows:<!-- /react-text --></p><!-- react-text: 612 -->
<!-- /react-text --><pre data-reactid="613"><code class="language-javascript hljs" data-reactid="614"><span class="hljs-keyword" data-reactid="615"><!-- react-text: 616 -->yield<!-- /react-text --></span><!-- react-text: 617 --> App.models.User.add(<!-- /react-text --><span class="hljs-string" data-reactid="618"><!-- react-text: 619 -->&#x27;test@test.com&#x27;<!-- /react-text --></span><!-- react-text: 620 -->, <!-- /react-text --><span class="hljs-string" data-reactid="621"><!-- react-text: 622 -->&#x27;password&#x27;<!-- /react-text --></span><!-- react-text: 623 -->);

<!-- /react-text --><span class="hljs-comment" data-reactid="624"><!-- react-text: 625 -->// let&#x27;s try loading, but with a wrong password<!-- /react-text --></span><!-- react-text: 626 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="627"><!-- react-text: 628 -->let<!-- /react-text --></span><!-- react-text: 629 --> user = <!-- /react-text --><span class="hljs-keyword" data-reactid="630"><!-- react-text: 631 -->yield<!-- /react-text --></span><!-- react-text: 632 --> App.models.User.load(<!-- /react-text --><span class="hljs-string" data-reactid="633"><!-- react-text: 634 -->&#x27;test@test.com&#x27;<!-- /react-text --></span><!-- react-text: 635 -->, <!-- /react-text --><span class="hljs-string" data-reactid="636"><!-- react-text: 637 -->&#x27;wrongpassword&#x27;<!-- /react-text --></span><!-- react-text: 638 -->);

<!-- /react-text --><span class="hljs-comment" data-reactid="639"><!-- react-text: 640 -->/* user === null */<!-- /react-text --></span><!-- react-text: 641 -->

<!-- /react-text --><span class="hljs-comment" data-reactid="642"><!-- react-text: 643 -->// let&#x27;s try loading with right password<!-- /react-text --></span><!-- react-text: 644 -->
user = <!-- /react-text --><span class="hljs-keyword" data-reactid="645"><!-- react-text: 646 -->yield<!-- /react-text --></span><!-- react-text: 647 --> App.models.User.load(<!-- /react-text --><span class="hljs-string" data-reactid="648"><!-- react-text: 649 -->&#x27;test@test.com&#x27;<!-- /react-text --></span><!-- react-text: 650 -->, <!-- /react-text --><span class="hljs-string" data-reactid="651"><!-- react-text: 652 -->&#x27;password&#x27;<!-- /react-text --></span><!-- react-text: 653 -->);

<!-- /react-text --><span class="hljs-built_in" data-reactid="654"><!-- react-text: 655 -->console<!-- /react-text --></span><!-- react-text: 656 -->.log(user.password);  <!-- /react-text --><span class="hljs-comment" data-reactid="657"><!-- react-text: 658 -->/* F24FA5B... some hash */<!-- /react-text --></span><!-- react-text: 659 -->
<!-- /react-text --></code></pre><!-- react-text: 660 -->
<!-- /react-text --><p data-reactid="661"><!-- react-text: 662 -->Notice above that <!-- /react-text --><code data-reactid="663"><!-- react-text: 664 -->user.password<!-- /react-text --></code><!-- react-text: 665 --> returns the hashed version of the password. Thus we wouldn’t be able to manually compare a password which the user has input with the the one in the documented returned by the model.<!-- /react-text --></p><!-- react-text: 666 -->
<!-- /react-text --><p data-reactid="667"><!-- react-text: 668 -->We can work around this using document methods.<!-- /react-text --></p><!-- react-text: 669 -->
<!-- /react-text --><h2 data-reactid="670"><!-- react-text: 671 -->Document methods<!-- /react-text --></h2><!-- react-text: 672 -->
<!-- /react-text --><p data-reactid="673"><!-- react-text: 674 -->Document methods are extra methods to enable on the document instances returned by our Model’s data retrieval methods.<!-- /react-text --></p><!-- react-text: 675 -->
<!-- /react-text --><p data-reactid="676"><em data-reactid="677"><!-- react-text: 678 -->Note: Waigo automatically adds <!-- /react-text --><code data-reactid="679"><!-- react-text: 680 -->_App()<!-- /react-text --></code><!-- react-text: 681 --> and <!-- /react-text --><code data-reactid="682"><!-- react-text: 683 -->_logger()<!-- /react-text --></code><!-- react-text: 684 --> methods to every document instance, same as for Model objects<!-- /react-text --></em><!-- react-text: 685 -->.<!-- /react-text --></p><!-- react-text: 686 -->
<!-- /react-text --><p data-reactid="687"><!-- react-text: 688 -->Let’s add a <!-- /react-text --><code data-reactid="689"><!-- react-text: 690 -->checkPassword()<!-- /react-text --></code><!-- react-text: 691 --> document method which lets us check whether a given password matches the password stored for a user:<!-- /react-text --></p><!-- react-text: 692 -->
<!-- /react-text --><pre data-reactid="693"><code class="language-javascript hljs" data-reactid="694"><span class="hljs-comment" data-reactid="695"><!-- react-text: 696 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 697 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="698"><!-- react-text: 699 -->const<!-- /react-text --></span><!-- react-text: 700 --> waigo = <!-- /react-text --><span class="hljs-built_in" data-reactid="701"><!-- react-text: 702 -->require<!-- /react-text --></span><!-- react-text: 703 -->(<!-- /react-text --><span class="hljs-string" data-reactid="704"><!-- react-text: 705 -->&#x27;waigo&#x27;<!-- /react-text --></span><!-- react-text: 706 -->),
	_ = waigo._;	<!-- /react-text --><span class="hljs-comment" data-reactid="707"><!-- react-text: 708 -->// lodash<!-- /react-text --></span><!-- react-text: 709 -->

exports.schema = {
  username: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="710"><!-- react-text: 711 -->String<!-- /react-text --></span><!-- react-text: 712 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="713"><!-- react-text: 714 -->true<!-- /react-text --></span><!-- react-text: 715 -->,
  },
  password: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="716"><!-- react-text: 717 -->String<!-- /react-text --></span><!-- react-text: 718 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="719"><!-- react-text: 720 -->true<!-- /react-text --></span><!-- react-text: 721 -->,
  },
};

exports.docMethods = {
  checkPassword: <!-- /react-text --><span class="hljs-function" data-reactid="722"><span class="hljs-keyword" data-reactid="723"><!-- react-text: 724 -->function<!-- /react-text --></span><!-- react-text: 725 -->*(<!-- /react-text --><span class="hljs-params" data-reactid="726"><!-- react-text: 727 -->password<!-- /react-text --></span><!-- react-text: 728 -->) <!-- /react-text --></span><!-- react-text: 729 -->{
    <!-- /react-text --><span class="hljs-keyword" data-reactid="730"><!-- react-text: 731 -->return<!-- /react-text --></span><!-- react-text: 732 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="733"><!-- react-text: 734 -->this<!-- /react-text --></span><!-- react-text: 735 -->.someHashingFunction(password) === <!-- /react-text --><span class="hljs-keyword" data-reactid="736"><!-- react-text: 737 -->this<!-- /react-text --></span><!-- react-text: 738 -->.password;
  },
};
<!-- /react-text --></code></pre><!-- react-text: 739 -->
<!-- /react-text --><p data-reactid="740"><em data-reactid="741"><!-- react-text: 742 -->Note: The context (<!-- /react-text --><code data-reactid="743"><!-- react-text: 744 -->this<!-- /react-text --></code><!-- react-text: 745 -->) of a document method is always the document instance itself.<!-- /react-text --></em></p><!-- react-text: 746 -->
<!-- /react-text --><p data-reactid="747"><!-- react-text: 748 -->How we might use it:<!-- /react-text --></p><!-- react-text: 749 -->
<!-- /react-text --><pre data-reactid="750"><code class="language-javascript hljs" data-reactid="751"><span class="hljs-keyword" data-reactid="752"><!-- react-text: 753 -->let<!-- /react-text --></span><!-- react-text: 754 --> user = <!-- /react-text --><span class="hljs-keyword" data-reactid="755"><!-- react-text: 756 -->yield<!-- /react-text --></span><!-- react-text: 757 --> App.models.User.get(<!-- /react-text --><span class="hljs-string" data-reactid="758"><!-- react-text: 759 -->&#x27;user id&#x27;<!-- /react-text --></span><!-- react-text: 760 -->);

<!-- /react-text --><span class="hljs-keyword" data-reactid="761"><!-- react-text: 762 -->if<!-- /react-text --></span><!-- react-text: 763 --> (user.checkPassword(inputPassword)) {
  <!-- /react-text --><span class="hljs-comment" data-reactid="764"><!-- react-text: 765 -->// password correct!<!-- /react-text --></span><!-- react-text: 766 -->
} <!-- /react-text --><span class="hljs-keyword" data-reactid="767"><!-- react-text: 768 -->else<!-- /react-text --></span><!-- react-text: 769 --> {
  <!-- /react-text --><span class="hljs-comment" data-reactid="770"><!-- react-text: 771 -->// password incorrect!<!-- /react-text --></span><!-- react-text: 772 -->
}
<!-- /react-text --></code></pre><!-- react-text: 773 -->
<!-- /react-text --><p data-reactid="774"><em data-reactid="775"><!-- react-text: 776 -->Note: Read the <!-- /react-text --><a href="https://hiddentao.github.io/thinodium" data-reactid="777"><!-- react-text: 778 -->Thinodium docs<!-- /react-text --></a><!-- react-text: 779 --> for the list of built-in Document instance methods.<!-- /react-text --></em></p><!-- react-text: 780 -->
<!-- /react-text --><p data-reactid="781"><strong data-reactid="782"><!-- react-text: 783 -->Virtual fields<!-- /react-text --></strong></p><!-- react-text: 784 -->
<!-- /react-text --><p data-reactid="785"><!-- react-text: 786 -->Virtual fields are document instance fields which appear to work like normal fields, except that they are actually represented by getter and setter functions, and consequently are not part of the model’s schema and are not stored in the database.<!-- /react-text --></p><!-- react-text: 787 -->
<!-- /react-text --><p data-reactid="788"><!-- react-text: 789 -->Virtual fields act as convenient accessors for information derived from the real document data. For example, let’s say we store a user’s birth date. We may add an <!-- /react-text --><code data-reactid="790"><!-- react-text: 791 -->age<!-- /react-text --></code><!-- react-text: 792 --> virtual field which automatically calculates their current age:<!-- /react-text --></p><!-- react-text: 793 -->
<!-- /react-text --><pre data-reactid="794"><code class="language-javascript hljs" data-reactid="795"><span class="hljs-comment" data-reactid="796"><!-- react-text: 797 -->// file: &lt;project folder&gt;/src/models/user.js<!-- /react-text --></span><!-- react-text: 798 -->

<!-- /react-text --><span class="hljs-keyword" data-reactid="799"><!-- react-text: 800 -->const<!-- /react-text --></span><!-- react-text: 801 --> moment = <!-- /react-text --><span class="hljs-built_in" data-reactid="802"><!-- react-text: 803 -->require<!-- /react-text --></span><!-- react-text: 804 -->(<!-- /react-text --><span class="hljs-string" data-reactid="805"><!-- react-text: 806 -->&#x27;moment&#x27;<!-- /react-text --></span><!-- react-text: 807 -->),
  waigo = <!-- /react-text --><span class="hljs-built_in" data-reactid="808"><!-- react-text: 809 -->require<!-- /react-text --></span><!-- react-text: 810 -->(<!-- /react-text --><span class="hljs-string" data-reactid="811"><!-- react-text: 812 -->&#x27;waigo&#x27;<!-- /react-text --></span><!-- react-text: 813 -->),
  _ = waigo._;	<!-- /react-text --><span class="hljs-comment" data-reactid="814"><!-- react-text: 815 -->// lodash<!-- /react-text --></span><!-- react-text: 816 -->

exports.schema = {
  username: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="817"><!-- react-text: 818 -->String<!-- /react-text --></span><!-- react-text: 819 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="820"><!-- react-text: 821 -->true<!-- /react-text --></span><!-- react-text: 822 -->,
  },
  dob: { 
    type: <!-- /react-text --><span class="hljs-built_in" data-reactid="823"><!-- react-text: 824 -->Date<!-- /react-text --></span><!-- react-text: 825 -->, 
    required: <!-- /react-text --><span class="hljs-literal" data-reactid="826"><!-- react-text: 827 -->true<!-- /react-text --></span><!-- react-text: 828 -->,
  },
};

exports.docVirtuals = {
  age: {
    get: <!-- /react-text --><span class="hljs-function" data-reactid="829"><span class="hljs-keyword" data-reactid="830"><!-- react-text: 831 -->function<!-- /react-text --></span><!-- react-text: 832 -->(<!-- /react-text --><span class="hljs-params" data-reactid="833"></span><!-- react-text: 834 -->) <!-- /react-text --></span><!-- react-text: 835 -->{
      <!-- /react-text --><span class="hljs-keyword" data-reactid="836"><!-- react-text: 837 -->return<!-- /react-text --></span><!-- react-text: 838 --> moment().diff(<!-- /react-text --><span class="hljs-keyword" data-reactid="839"><!-- react-text: 840 -->this<!-- /react-text --></span><!-- react-text: 841 -->.dob, <!-- /react-text --><span class="hljs-string" data-reactid="842"><!-- react-text: 843 -->&#x27;years&#x27;<!-- /react-text --></span><!-- react-text: 844 -->);
    }
  }
};
<!-- /react-text --></code></pre><!-- react-text: 845 -->
<!-- /react-text --><p data-reactid="846"><!-- react-text: 847 -->And here is how you would use it:<!-- /react-text --></p><!-- react-text: 848 -->
<!-- /react-text --><pre data-reactid="849"><code class="language-javascript hljs" data-reactid="850"><span class="hljs-keyword" data-reactid="851"><!-- react-text: 852 -->let<!-- /react-text --></span><!-- react-text: 853 --> user = <!-- /react-text --><span class="hljs-keyword" data-reactid="854"><!-- react-text: 855 -->yield<!-- /react-text --></span><!-- react-text: 856 --> App.models.User.insert({
  username: <!-- /react-text --><span class="hljs-string" data-reactid="857"><!-- react-text: 858 -->&#x27;test&#x27;<!-- /react-text --></span><!-- react-text: 859 -->,
  dob: moment(<!-- /react-text --><span class="hljs-string" data-reactid="860"><!-- react-text: 861 -->&#x27;1982-02-02&#x27;<!-- /react-text --></span><!-- react-text: 862 -->, <!-- /react-text --><span class="hljs-string" data-reactid="863"><!-- react-text: 864 -->&#x27;YYYY-MM-DD&#x27;<!-- /react-text --></span><!-- react-text: 865 -->).toDate(),
});

<!-- /react-text --><span class="hljs-built_in" data-reactid="866"><!-- react-text: 867 -->console<!-- /react-text --></span><!-- react-text: 868 -->.log( user.age );
<!-- /react-text --><span class="hljs-comment" data-reactid="869"><!-- react-text: 870 -->/* 34 */<!-- /react-text --></span><!-- react-text: 871 -->

<!-- /react-text --><span class="hljs-comment" data-reactid="872"><!-- react-text: 873 -->// let&#x27;s try setting the field<!-- /react-text --></span><!-- react-text: 874 -->
user.age = <!-- /react-text --><span class="hljs-number" data-reactid="875"><!-- react-text: 876 -->2<!-- /react-text --></span><!-- react-text: 877 -->; <!-- /react-text --><span class="hljs-comment" data-reactid="878"><!-- react-text: 879 -->/* throws Error */<!-- /react-text --></span><!-- react-text: 880 -->
<!-- /react-text --></code></pre><!-- react-text: 881 -->
<!-- /react-text --><p data-reactid="882"><!-- react-text: 883 -->Notice how we were unable to set <!-- /react-text --><code data-reactid="884"><!-- react-text: 885 -->age<!-- /react-text --></code><!-- react-text: 886 -->. Virtual fields can be set if we add setters to them:<!-- /react-text --></p><!-- react-text: 887 -->
<!-- /react-text --><pre data-reactid="888"><code class="language-javascript hljs" data-reactid="889"><!-- react-text: 890 -->exports.docVirtuals = {
  age: {
    get: <!-- /react-text --><span class="hljs-function" data-reactid="891"><span class="hljs-keyword" data-reactid="892"><!-- react-text: 893 -->function<!-- /react-text --></span><!-- react-text: 894 -->(<!-- /react-text --><span class="hljs-params" data-reactid="895"></span><!-- react-text: 896 -->) <!-- /react-text --></span><!-- react-text: 897 -->{
      <!-- /react-text --><span class="hljs-keyword" data-reactid="898"><!-- react-text: 899 -->return<!-- /react-text --></span><!-- react-text: 900 --> moment().diff(<!-- /react-text --><span class="hljs-keyword" data-reactid="901"><!-- react-text: 902 -->this<!-- /react-text --></span><!-- react-text: 903 -->.dob, <!-- /react-text --><span class="hljs-string" data-reactid="904"><!-- react-text: 905 -->&#x27;years&#x27;<!-- /react-text --></span><!-- react-text: 906 -->);
    },
    set: <!-- /react-text --><span class="hljs-function" data-reactid="907"><span class="hljs-keyword" data-reactid="908"><!-- react-text: 909 -->function<!-- /react-text --></span><!-- react-text: 910 -->(<!-- /react-text --><span class="hljs-params" data-reactid="911"><!-- react-text: 912 -->val<!-- /react-text --></span><!-- react-text: 913 -->) <!-- /react-text --></span><!-- react-text: 914 -->{
      <!-- /react-text --><span class="hljs-comment" data-reactid="915"><!-- react-text: 916 -->// weird thing to do, I know!<!-- /react-text --></span><!-- react-text: 917 -->
      <!-- /react-text --><span class="hljs-keyword" data-reactid="918"><!-- react-text: 919 -->this<!-- /react-text --></span><!-- react-text: 920 -->.dob = moment().subtract(val, <!-- /react-text --><span class="hljs-string" data-reactid="921"><!-- react-text: 922 -->&#x27;years&#x27;<!-- /react-text --></span><!-- react-text: 923 -->).toDate();
    }
  }
};
<!-- /react-text --></code></pre><!-- react-text: 924 -->
<!-- /react-text --><p data-reactid="925"><em data-reactid="926"><!-- react-text: 927 -->Note: The getters and setters of virtual functions must by synchronous non-generator functions.<!-- /react-text --></em></p><!-- react-text: 928 -->
<!-- /react-text --><p data-reactid="929"><!-- react-text: 930 -->When using the above setter keep in mind that we need to explicitly <!-- /react-text --><code data-reactid="931"><!-- react-text: 932 -->save()<!-- /react-text --></code><!-- react-text: 933 --> the document in order for the <!-- /react-text --><code data-reactid="934"><!-- react-text: 935 -->dob<!-- /react-text --></code><!-- react-text: 936 --> field changes to take effect:<!-- /react-text --></p><!-- react-text: 937 -->
<!-- /react-text --><pre data-reactid="938"><code class="language-javascript hljs" data-reactid="939"><span class="hljs-keyword" data-reactid="940"><!-- react-text: 941 -->const<!-- /react-text --></span><!-- react-text: 942 --> oldDob = user.dob;

<!-- /react-text --><span class="hljs-built_in" data-reactid="943"><!-- react-text: 944 -->console<!-- /react-text --></span><!-- react-text: 945 -->.log( user.age );
<!-- /react-text --><span class="hljs-comment" data-reactid="946"><!-- react-text: 947 -->/* 34 */<!-- /react-text --></span><!-- react-text: 948 -->

user.age = <!-- /react-text --><span class="hljs-number" data-reactid="949"><!-- react-text: 950 -->25<!-- /react-text --></span><!-- react-text: 951 -->;

<!-- /react-text --><span class="hljs-keyword" data-reactid="952"><!-- react-text: 953 -->let<!-- /react-text --></span><!-- react-text: 954 --> diff = moment(user.dob).diff(oldDob, <!-- /react-text --><span class="hljs-string" data-reactid="955"><!-- react-text: 956 -->&#x27;years&#x27;<!-- /react-text --></span><!-- react-text: 957 -->);

<!-- /react-text --><span class="hljs-built_in" data-reactid="958"><!-- react-text: 959 -->console<!-- /react-text --></span><!-- react-text: 960 -->.log( diff );
<!-- /react-text --><span class="hljs-comment" data-reactid="961"><!-- react-text: 962 -->/* 9 */<!-- /react-text --></span><!-- react-text: 963 -->

<!-- /react-text --><span class="hljs-comment" data-reactid="964"><!-- react-text: 965 -->// save it!<!-- /react-text --></span><!-- react-text: 966 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="967"><!-- react-text: 968 -->yield<!-- /react-text --></span><!-- react-text: 969 --> user.save();
<!-- /react-text --></code></pre><!-- react-text: 970 -->
<!-- /react-text --></div><div class="prev-next" data-reactid="971"><a class="prev" href="/docs/databaseandmodels/overviewofmodels/" data-reactid="972"><!-- react-text: 973 -->« <!-- /react-text --><!-- react-text: 974 -->Database and Models: Overview of models<!-- /react-text --></a><a class="next" href="/docs/databaseandmodels/builtinmodels/" data-reactid="975"><!-- react-text: 976 -->Database and Models: Built-in models<!-- /react-text --><!-- react-text: 977 --> »<!-- /react-text --></a></div></div></section></main><footer data-reactid="978"><p class="tagline quoted" data-reactid="979">Node.js ES6 framework for reactive, data-driven apps and APIs</p><div class="credits" data-reactid="980"><!-- react-text: 981 -->Icons made by <!-- /react-text --><a href="http://www.freepik.com" title="Freepik" data-reactid="982">Freepik</a><!-- react-text: 983 --> from <!-- /react-text --><a href="http://www.flaticon.com" title="Flaticon" data-reactid="984">www.flaticon.com</a><!-- react-text: 985 --> is licensed by <!-- /react-text --><a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank" data-reactid="986">CC 3.0 BY</a></div><div class="social" data-reactid="987"><a title="Github" href="https://github.com/waigo/waigo" data-reactid="988"><i class="github" data-reactid="989"></i></a><a title="Twitter" href="https://twitter.com/waigojs" data-reactid="990"><i class="twitter" data-reactid="991"></i></a><a title="discuss" href="https://discord.gg/Jf3pGjf" data-reactid="992"><i class="discuss" data-reactid="993"></i></a></div></footer></div></div><script src="/bundle.js?t=1472195243527"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-11640584-17', 'auto');
            ga('send', 'pageview');
          </script></body></html>