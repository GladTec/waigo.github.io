<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" charset="utf-8">
    <title>Waigo.js</title><!--[if IE]><link rel="shortcut icon" href="img/logo_32x32.ico" /><![endif]-->
    <link rel="shortcut icon" href="/img/logo_114x114.png">
    <meta name="msapplication-TileColor" content="#fff">
    <meta name="msapplication-TileImage" content="/img/logo_144x144.png">
    <link rel="stylesheet" media="screen" href="/style.css">
  </head>
  <body>
    <header id="top" role="banner" class="navbar navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" data-toggle="collapse" data-target=".topmenu-navbar-collapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Waigo</a>
        </div>
        <div role="navigation" class="collapse navbar-collapse topmenu-navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a id="guideNavItem" href="/">Guide</a></li>
            <li><a href="/api">API</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/waigo/waigo">Github</a></li>
          </ul>
        </div>
      </div>
    </header>
    <main id="content">
      <div id="api">
        <div class="container">
          <div class="row">
            <div role="complementary" class="col-md-3 waigo-api-index">
              <ul class="nav hidden-sm hidden-xs">
                <li><a href="../index.html">Main</a></li>
                <li><a href="../config/base.js.html">config/base.js</a></li>
                <li><a href="../config/development.js.html">config/development.js</a></li>
                <li><a href="../config/index.js.html">config/index.js</a></li>
                <li><a href="../controllers/main.js.html">controllers/main.js</a></li>
                <li><a href="../routes.js.html">routes.js</a></li>
                <li><a href="../server.js.html">server.js</a></li>
                <li><a href="../support/db/mongoose.js.html">support/db/mongoose.js</a></li>
                <li class="active"><a href="../support/errors.js.html">support/errors.js</a></li>
                <li><a href="../support/logging/winston.js.html">support/logging/winston.js</a></li>
                <li><a href="../support/middleware/errorHandler.js.html">support/middleware/errorHandler.js</a></li>
                <li><a href="../support/middleware/outputFormats.js.html">support/middleware/outputFormats.js</a></li>
                <li><a href="../support/middleware/responseTime.js.html">support/middleware/responseTime.js</a></li>
                <li><a href="../support/middleware/sessions.js.html">support/middleware/sessions.js</a></li>
                <li><a href="../support/outputFormats/html.js.html">support/outputFormats/html.js</a></li>
                <li><a href="../support/outputFormats/json.js.html">support/outputFormats/json.js</a></li>
                <li><a href="../support/routeMapper.js.html">support/routeMapper.js</a></li>
                <li><a href="../support/session/store/mongo.js.html">support/session/store/mongo.js</a></li>
              </ul>
              <div class="visible-sm visible-xs">
                <button type="button" data-toggle="collapse" data-target="#api-index-xs" class="btn btn-info">Show/hide API index</button>
                <div id="api-index-xs" class="collapse">
                  <ul class="nav">
                    <li><a href="../index.html">Main</a></li>
                    <li><a href="../config/base.js.html">config/base.js</a></li>
                    <li><a href="../config/development.js.html">config/development.js</a></li>
                    <li><a href="../config/index.js.html">config/index.js</a></li>
                    <li><a href="../controllers/main.js.html">controllers/main.js</a></li>
                    <li><a href="../routes.js.html">routes.js</a></li>
                    <li><a href="../server.js.html">server.js</a></li>
                    <li><a href="../support/db/mongoose.js.html">support/db/mongoose.js</a></li>
                    <li class="active"><a href="../support/errors.js.html">support/errors.js</a></li>
                    <li><a href="../support/logging/winston.js.html">support/logging/winston.js</a></li>
                    <li><a href="../support/middleware/errorHandler.js.html">support/middleware/errorHandler.js</a></li>
                    <li><a href="../support/middleware/outputFormats.js.html">support/middleware/outputFormats.js</a></li>
                    <li><a href="../support/middleware/responseTime.js.html">support/middleware/responseTime.js</a></li>
                    <li><a href="../support/middleware/sessions.js.html">support/middleware/sessions.js</a></li>
                    <li><a href="../support/outputFormats/html.js.html">support/outputFormats/html.js</a></li>
                    <li><a href="../support/outputFormats/json.js.html">support/outputFormats/json.js</a></li>
                    <li><a href="../support/routeMapper.js.html">support/routeMapper.js</a></li>
                    <li><a href="../support/session/store/mongo.js.html">support/session/store/mongo.js</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div role="main" class="col-md-7 waigo-api-content">
              <section id="_">
                <h1>_</h1>
                <div class="description"><p>Exceptions and error handlers.</p> </div>
                <h5 class="subheader"></h5>
                <p>
                  <div class="label label-success radius ctx-type">declaration</div>
                </p>
              </section>
              <pre><code class="language-javascript">var _ = require('lodash'),
  Promise = require('bluebird'),
  util = require('util');</code></pre>
              <section id="errorToViewObject">
                <h1>errorToViewObject</h1>
                <div class="description"><p>Convert given error to view object.</p> </div>
                <h5 class="subheader"></h5>
                <p>
                  <div class="label label-success radius ctx-type">declaration</div><span class="symbolReturns">-> Promise</span>
                </p>
              </section>
              <table class="params table table-bordered table-striped">
                <thead>
                  <tr>
                    <th style="width:20%">Option</th>
                    <th style="width:20%">Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="name">{Error}</td>
                    <td class="type">error</td>
                    <td class="description">error object. </td>
                  </tr>
                </tbody>
              </table>
              <pre><code class="language-javascript">var errorToViewObject = exports.toViewObject = function(error) {
  if (_.isFunction(error.toViewObject)) {
    return Promise.resolve(error.toViewObject());
  } else {
    return Promise.resolve({
      msg: error.message
    });
  }
};</code></pre>
              <section id="BaseError">
                <h1>BaseError</h1>
                <div class="description"><p>Base error class.</p> </div>
                <h5 class="subheader"></h5>
                <p>
                  <div class="label label-success radius ctx-type">declaration</div>
                </p>
              </section>
              <table class="params table table-bordered table-striped">
                <thead>
                  <tr>
                    <th style="width:20%">Option</th>
                    <th style="width:20%">Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="name">{String}</td>
                    <td class="type">msg</td>
                    <td class="description">error message.</td>
                  </tr>
                  <tr>
                    <td class="name">{Number}</td>
                    <td class="type">status</td>
                    <td class="description">HTTP return status code to set.</td>
                  </tr>
                </tbody>
              </table>
              <pre><code class="language-javascript">var BaseError = exports.BaseError = function(msg, status) {
  Error.call(this, this.message);
  this.name = 'BaseError';
  this.message = msg || 'An error occurred';
  this.status = status || 500;
  Error.captureStackTrace(this, BaseError);
};
util.inherits(BaseError, Error);</code></pre>
              <section id="toViewObject">
                <h1>toViewObject</h1>
                <div class="description"><p>Get renderable representation of this error.</p> </div>
                <h5 class="subheader"></h5>
                <p>
                  <div class="label label-info radius ctx-type">method</div><span class="symbolReturns">-> Promise</span>
                </p>
              </section>
              <pre><code class="language-javascript">BaseError.prototype.toViewObject = function() {
  return Promise.resolve({
    type: this.name,
    msg: this.message
  });
};</code></pre>
              <section id="createSubType">
                <h1>createSubType</h1>
                <div class="description"><p>Create a subclass of this error type.</p> </div>
                <h5 class="subheader"></h5>
                <p>
                  <div class="label label-info radius ctx-type">method</div><span class="symbolReturns">-> Function</span>
                </p>
              </section>
              <table class="params table table-bordered table-striped">
                <thead>
                  <tr>
                    <th style="width:20%">Option</th>
                    <th style="width:20%">Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="name">{String}</td>
                    <td class="type">subTypeErrorName</td>
                    <td class="description">name of this new error type.</td>
                  </tr>
                  <tr>
                    <td class="name">{Object}</td>
                    <td class="type">options</td>
                    <td class="description">additional options.</td>
                  </tr>
                  <tr>
                    <td class="name">{Object}</td>
                    <td class="type">options.message</td>
                    <td class="description">default error message.</td>
                  </tr>
                  <tr>
                    <td class="name">{Object}</td>
                    <td class="type">options.status</td>
                    <td class="description">default error status. </td>
                  </tr>
                </tbody>
              </table>
              <pre><code class="language-javascript">BaseError.createSubType = function(subTypeErrorName, options) {
  options = options || {};

  var newErrorClass = function(msg, status) {
    BaseError.call(this, msg || options.message, status || options.status);
    this.name = subTypeErrorName;
    Error.captureStackTrace(this, newErrorClass);
  };
  util.inherits(newErrorClass, BaseError);
  return newErrorClass;
};</code></pre>
              <section id="MultipleError">
                <h1>MultipleError</h1>
                <div class="description"><p>Multiple errors grouped together.</p> </div>
                <h5 class="subheader"></h5>
                <p>
                  <div class="label label-success radius ctx-type">declaration</div>
                </p>
              </section>
              <table class="params table table-bordered table-striped">
                <thead>
                  <tr>
                    <th style="width:20%">Option</th>
                    <th style="width:20%">Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="name">{Object}</td>
                    <td class="type">errors</td>
                    <td class="description">key-value map of errors, where each value is itself an `Error` instance.</td>
                  </tr>
                  <tr>
                    <td class="name">{Number}</td>
                    <td class="type">status</td>
                    <td class="description">HTTP return status code to set.</td>
                  </tr>
                </tbody>
              </table>
              <pre><code class="language-javascript">var MultipleError = exports.MultipleError = function(errors, status) {
  BaseError.call(this, 'There were multiple errors', status);
  this.name = 'MultipleError';
  this.errors = errors || {};
  Error.captureStackTrace(this, MultipleError);
};
util.inherits(MultipleError, BaseError);</code></pre>
              <section id="toViewObject">
                <h1>toViewObject</h1>
                <div class="description"><p>@see BaseError#toViewObject</p> </div>
                <h5 class="subheader"></h5>
                <p>
                  <div class="label label-info radius ctx-type">method</div>
                </p>
              </section>
              <pre><code class="language-javascript">MultipleError.prototype.toViewObject = function() {
  var self = this;

  return Promise.props(
      _.mapValues(self.errors, function(err) {
        return errorToViewObject(err);
      })
    )
    .then(function gotViewObjects(viewObjects) {
      return {
        type: self.name,
        errors: viewObjects
      };
    });
};</code></pre>
            </div>
            <div class="col-md-2">
              <div role="complementary" class="waigo-content-menu hidden-print">
                <ul class="nav">
                  <li><a href="#_"><span>_</span></a></li>
                  <li><a href="#errorToViewObject"><span>errorToViewObject</span></a></li>
                  <li><a href="#BaseError"><span>BaseError</span></a></li>
                  <li><a href="#toViewObject"><span>toViewObject()</span></a></li>
                  <li><a href="#createSubType"><span>createSubType()</span></a></li>
                  <li><a href="#MultipleError"><span>MultipleError</span></a></li>
                  <li><a href="#toViewObject"><span>toViewObject()</span></a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer role="contentinfo"><p>Built by <a href="http://hiddentao.com">hiddentao</a></p>
<p>This page was <a href="https://github.com/waigo/waigojs.com-generator">generated</a> on Tue, 25 Feb 2014 04:43:18 GMT</p>

    </footer>
    <script type="text/javascript" src="/scripts.js"></script>
    <script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(["setDomains", ["*.waigojs.com","*.waigo.github.io"]]);
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);
      (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://piwik.hiddentao.com/";
        _paq.push(["setTrackerUrl", u+"piwik.php"]);
        _paq.push(["setSiteId", "3"]);
        var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
        g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
      })();
      
    </script>
  </body>
</html>